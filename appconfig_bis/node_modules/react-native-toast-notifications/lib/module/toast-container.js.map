{"version":3,"sources":["toast-container.tsx"],"names":["React","Component","StyleSheet","Dimensions","KeyboardAvoidingView","Platform","Toast","dims","get","ToastContainer","constructor","props","message","toastOptions","id","Math","random","toString","onDestroy","setState","toasts","state","filter","t","requestAnimationFrame","open","onHide","hide","map","toast","renderBottomToasts","offset","offsetBottom","style","bottom","justifyContent","flexDirection","OS","undefined","styles","container","placement","renderTopToasts","offsetTop","top","render","create","flex","position","width","maxWidth","zIndex","left","right","overflow","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  Dimensions,\r\n  ViewStyle,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n} from \"react-native\";\r\nimport Toast, { ToastOptions, ToastProps } from \"./toast\";\r\n\r\nconst dims = Dimensions.get(\"window\");\r\n\r\nexport interface Props extends ToastOptions {\r\n  renderToast?(toast: ToastProps): JSX.Element;\r\n  renderType?: { [type: string]: (toast: ToastProps) => JSX.Element };\r\n  offset?: number;\r\n  offsetTop?: number;\r\n  offsetBottom?: number;\r\n}\r\n\r\ninterface State {\r\n  toasts: Array<ToastProps>;\r\n}\r\n\r\nclass ToastContainer extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      toasts: [],\r\n    };\r\n  }\r\n\r\n  static defaultProps = {\r\n    placement: \"bottom\",\r\n    offset: 10,\r\n  };\r\n\r\n  /**\r\n   * Shows a new toast. Returns id\r\n   */\r\n  show = (message: string | JSX.Element, toastOptions?: ToastOptions) => {\r\n    let id = toastOptions?.id || Math.random().toString();\r\n    const onDestroy = () =>\r\n      this.setState({ toasts: this.state.toasts.filter((t) => t.id !== id) });\r\n\r\n    requestAnimationFrame(() => {\r\n      this.setState({ toasts: this.state.toasts.filter((t) => t.id !== id) });\r\n      this.setState({\r\n        toasts: [\r\n          {\r\n            id,\r\n            onDestroy,\r\n            message,\r\n            open: true,\r\n            onHide: () => this.hide(id),\r\n            ...this.props,\r\n            ...toastOptions,\r\n          },\r\n          ...this.state.toasts,\r\n        ],\r\n      });\r\n    });\r\n\r\n    return id;\r\n  };\r\n\r\n  /**\r\n   * Updates a toast, To use this create you must pass an id to show method first, then pass it here to update the toast.\r\n   */\r\n  update = (\r\n    id: string,\r\n    message: string | JSX.Element,\r\n    toastOptions?: ToastOptions\r\n  ) => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((toast) =>\r\n        toast.id === id ? { ...toast, message, ...toastOptions } : toast\r\n      ),\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Removes a toast from stack\r\n   */\r\n  hide = (id: string) => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((t) =>\r\n        t.id === id ? { ...t, open: false } : t\r\n      ),\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Removes all toasts in stack\r\n   */\r\n  hideAll = () => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((t) => ({ ...t, open: false })),\r\n    });\r\n  };\r\n\r\n  renderBottomToasts() {\r\n    const { toasts } = this.state;\r\n    let { offset, offsetBottom } = this.props;\r\n    let style: ViewStyle = {\r\n      bottom: offsetBottom || offset,\r\n      justifyContent: \"flex-end\",\r\n      flexDirection: \"column\",\r\n    };\r\n    return (\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"position\" : undefined}\r\n        style={[styles.container, style]}\r\n        pointerEvents=\"box-none\"\r\n      >\r\n        {toasts\r\n          .filter((t) => !t.placement || t.placement === \"bottom\")\r\n          .map((toast) => (\r\n            <Toast key={toast.id} {...toast} />\r\n          ))}\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n\r\n  renderTopToasts() {\r\n    const { toasts } = this.state;\r\n    let { offset, offsetTop } = this.props;\r\n    let style: ViewStyle = {\r\n      top: offsetTop || offset,\r\n      justifyContent: \"flex-start\",\r\n      flexDirection: \"column-reverse\",\r\n    };\r\n    return (\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"position\" : undefined}\r\n        style={[styles.container, style]}\r\n        pointerEvents=\"box-none\"\r\n      >\r\n        {toasts\r\n          .filter((t) => t.placement === \"top\")\r\n          .map((toast) => (\r\n            <Toast key={toast.id} {...toast} />\r\n          ))}\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.renderTopToasts()}\r\n        {this.renderBottomToasts()}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 0,\r\n    position: \"absolute\",\r\n    width: dims.width,\r\n    maxWidth: dims.width,\r\n    zIndex: 999,\r\n    left: 0,\r\n    right: 0,\r\n    ...(Platform.OS === \"web\" ? { overflow: \"hidden\" } : null),\r\n  },\r\n  message: {\r\n    color: \"#333\",\r\n  },\r\n});\r\n\r\nexport default ToastContainer;\r\n"]}