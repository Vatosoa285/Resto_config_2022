{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/vats/Resto_config_2022/appconfig_bis/src/screens/Activite/index.js\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { traitementFilter } from \"../../components/pickerActivite\";\nimport { userContext } from \"../../contexts/userContext\";\nimport { useToast } from \"react-native-toast-notifications\";\nimport { sendAPI } from \"../../components/sendAPI\";\nimport Icon from \"@expo/vector-icons/Octicons\";\nimport * as Device from 'expo-device';\nimport constantes from \"../../constantes\";\nimport styles from \"../../styles\";\nimport ModalContact from \"../../components/modalContact\";\nimport ViewStatus from \"../../components/viewStatut\";\nimport logoVide from \"../../../assets/logovide.png\";\n\nfunction activiteScreen(_ref) {\n  var _this = this;\n\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var toast = useToast();\n  var refBenef = useRef(null);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      myCtrl = _useState2[0],\n      setMyCtrl = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      myCarret = _useState4[0],\n      setMyCarret = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      data = _useState8[0],\n      setData = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      upToDate = _useState10[0],\n      setUpToDate = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modalVisibleCommentaireAbsence = _useState12[0],\n      setModalVisibleCommentaireAbsence = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      modalVisibleCommentaireActivite = _useState14[0],\n      setmodalVisibleCommentaireActivite = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      modalVisibleContact = _useState16[0],\n      setmodalVisibleContact = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      modalVisibleMailATous = _useState18[0],\n      setModalVisibleMailATous = _useState18[1];\n\n  var _useState19 = useState('person'),\n      _useState20 = _slicedToArray(_useState19, 2),\n      icone = _useState20[0],\n      setIcone = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      comment = _useState22[0],\n      setComment = _useState22[1];\n\n  var _useState23 = useState(['', '', '', '']),\n      _useState24 = _slicedToArray(_useState23, 2),\n      infoComment = _useState24[0],\n      setInfoComment = _useState24[1];\n\n  var _useState25 = useState(''),\n      _useState26 = _slicedToArray(_useState25, 2),\n      infoActivite = _useState26[0],\n      setInfoActivite = _useState26[1];\n\n  var _useState27 = useState(''),\n      _useState28 = _slicedToArray(_useState27, 2),\n      commentActivite = _useState28[0],\n      setCommentActivite = _useState28[1];\n\n  var _useState29 = useState(\"0\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      beneficiaireActivite = _useState30[0],\n      setBeneficiaireActivite = _useState30[1];\n\n  var _useState31 = useState(\"TOUT\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      affichage = _useState32[0],\n      setAffichage = _useState32[1];\n\n  var _useState33 = useState(''),\n      _useState34 = _slicedToArray(_useState33, 2),\n      visibleData = _useState34[0],\n      setVisibleData = _useState34[1];\n\n  var _useState35 = useState(''),\n      _useState36 = _slicedToArray(_useState35, 2),\n      mail = _useState36[0],\n      setMail = _useState36[1];\n\n  var _useState37 = useState(''),\n      _useState38 = _slicedToArray(_useState37, 2),\n      phone = _useState38[0],\n      setPhone = _useState38[1];\n\n  var _useState39 = useState(),\n      _useState40 = _slicedToArray(_useState39, 2),\n      idDestinataire = _useState40[0],\n      setIdDestinataire = _useState40[1];\n\n  var userID = React.useContext(userContext).userID;\n  var token = React.useContext(userContext).token;\n  var _route$params = route.params,\n      IDActivite = _route$params.IDActivite,\n      IDSite = _route$params.IDSite,\n      IDJour = _route$params.IDJour,\n      NomActivite = _route$params.NomActivite,\n      NomSite = _route$params.NomSite,\n      idRole = _route$params.idRole;\n  var handleError = React.useContext(userContext).handleError;\n  var fctModalMail = React.useContext(userContext).fctModalMail;\n\n  function versListe(_ref2, liste) {\n    var navigation = _ref2.navigation;\n    navigation.navigate('ListeUtilisateur', {\n      IDActivite: IDActivite,\n      IDSite: IDSite,\n      IDJour: IDJour,\n      liste: liste\n    });\n  }\n\n  useEffect(function () {\n    var unsubscribe = navigation.addListener('focus', function () {\n      setLoading(true);\n      sendAPI('APP', 'AP_LST_PRE_EQU', {\n        'P_IDACTIVITE': IDActivite,\n        'P_IDSITE': IDSite,\n        'P_JOUR': IDJour\n      }, token).then(function (json) {\n        setData(json);\n        setLoading(false);\n        setUpToDate(true);\n      }).catch(function (error) {\n        setLoading(false);\n        setUpToDate(true);\n        handleError(error);\n      });\n    });\n    return unsubscribe;\n  }, [navigation]);\n  useEffect(function () {\n    if (!upToDate) {\n      setLoading(true);\n      sendAPI('APP', 'AP_LST_PRE_EQU', {\n        'P_IDACTIVITE': IDActivite,\n        'P_IDSITE': IDSite,\n        'P_JOUR': IDJour\n      }, token).then(function (json) {\n        setData(json);\n        setLoading(false);\n        setUpToDate(true);\n      }).catch(function (error) {\n        setLoading(false);\n        setUpToDate(true);\n        handleError(error);\n      });\n    }\n  }, [upToDate]);\n  useEffect(function () {\n    setVisibleData(traitementFilter(affichage, data, 6));\n  }, [data, affichage]);\n\n  var renderItem = function renderItem(_ref3) {\n    var item = _ref3.item;\n    return React.createElement(View, {\n      style: [styles.item, styles[item.nomrole]],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }\n    }, React.createElement(View, {\n      style: {\n        justifyContent: \"space-evenly\",\n        flexDirection: \"column\",\n        marginLeft: 10,\n        paddingLeft: \"5%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, item.prenom), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, item.nom)), React.createElement(View, {\n      style: {\n        flexDirection: \"row\",\n        paddingRight: \"1%\",\n        justifyContent: \"flex-end\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, React.createElement(ViewStatus, {\n      fctStatut: function fctStatut() {\n        return changerStatut(constantes.BDD, item.etat, item.idbenevole, IDJour, IDActivite, IDSite, item.nomrole == \"BENEVOLE\" ? \"1\" : \"2\");\n      },\n      fctCommentaire: function fctCommentaire() {\n        setModalVisibleCommentaireAbsence(true);\n        setComment(item.commentaire);\n        setInfoComment([IDJour, IDActivite, IDSite, item.idbenevole]);\n      },\n      status: item.etat,\n      role: idRole,\n      align: \"row\",\n      id1: userID,\n      id2: item.idbenevole,\n      commentaire: item.commentaire,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }), React.createElement(View, {\n      style: {\n        justifyContent: \"space-evenly\",\n        marginRight: 0\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, React.createElement(Pressable, {\n      onPress: function onPress() {\n        setMail(item.email);\n        setPhone(item.telephone);\n        setIdDestinataire(item.idbenevole);\n        setmodalVisibleContact(!modalVisibleContact);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, function (_ref4) {\n      var pressed = _ref4.pressed;\n      return React.createElement(Icon, {\n        name: \"mail\",\n        size: 32,\n        color: pressed ? 'darkslategrey' : 'black',\n        style: styles.statusIcon,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 15\n        }\n      });\n    }))));\n  };\n\n  var changerStatut = function changerStatut(bdd, statut, benevole, jour, activite, site, role) {\n    if (statut == \"Absent\") {\n      sendAPI('APP', 'AP_DEL_PRESENCE', {\n        \"P_IDBENEVOLE\": benevole,\n        \"P_JOURPRESENCE\": jour,\n        \"P_IDACTIVITE\": activite,\n        \"P_IDSITE\": site\n      }, token).then(function (texte) {\n        toastComponent(\"Statut : Non défini\", \"warning\");\n        setUpToDate(false);\n      }).catch(function (error) {\n        setUpToDate(false);\n        handleError(error);\n      });\n    } else if (statut == \"Présent\") {\n      setInfoComment([jour, activite, site, benevole]);\n      setModalVisibleCommentaireAbsence(true);\n    } else {\n      sendAPI('APP', 'AP_INS_PRESENCE', {\n        \"P_IDBENEVOLE\": benevole,\n        \"P_JOURPRESENCE\": jour,\n        \"P_IDACTIVITE\": activite,\n        \"P_IDSITE\": site,\n        \"P_IDROLE\": role\n      }, token).then(function (texte) {\n        toastComponent(\"Statut : Présent\", \"success\");\n        setUpToDate(false);\n      }).catch(function (error) {\n        setUpToDate(false);\n        handleError(error);\n      });\n    }\n  };\n\n  var handleChangeNumber = function handleChangeNumber(value) {\n    setBeneficiaireActivite(normalizeInputNumber(value, beneficiaireActivite));\n  };\n\n  var listeID = function listeID() {\n    var ids = [];\n\n    for (var _iterator = _createForOfIteratorHelperLoose(data), _step; !(_step = _iterator()).done;) {\n      var d = _step.value;\n\n      if (d.idbenevole != userID) {\n        ids.push(d.idbenevole);\n      }\n    }\n\n    return ids;\n  };\n\n  var smsAll = function smsAll() {\n    var phones = \"\";\n\n    for (var _iterator2 = _createForOfIteratorHelperLoose(data), _step2; !(_step2 = _iterator2()).done;) {\n      var d = _step2.value;\n      phones += d.telephone + \",\";\n    }\n\n    phones = phones.slice(0, -1);\n    var url = Platform.OS === 'android' ? \"sms:\" + phones + \"?body=\" : \"sms:/open?addresses=\" + phones + \"&body=\";\n    Linking.canOpenURL(url).then(function (supported) {\n      if (!supported) {\n        throw \"L'envoi de SMS n'est pas supporté sur cet appareil\";\n      } else {\n        Linking.openURL(url);\n      }\n    }).catch();\n  };\n\n  var toastComponent = function toastComponent(texte, type) {\n    toast.show(texte, {\n      type: type,\n      position: \"bottom\",\n      duration: 2000,\n      offset: 30,\n      animationType: \"zoom-in\"\n    });\n  };\n\n  var fctCommentaireActivite = function fctCommentaireActivite() {\n    setmodalVisibleCommentaireActivite(false);\n\n    if (infoActivite == 0) {\n      sendAPI('APP', 'AP_INS_SUIVI_ACTIVITE', {\n        'P_IDACTIVITE': IDActivite,\n        'P_IDSITE': IDSite,\n        'P_JOUR': IDJour,\n        'P_NOMBREBENEFICIAIRE': beneficiaireActivite,\n        'P_COMMENTAIRE': commentActivite\n      }, token).then(function () {\n        return setUpToDate(false);\n      }).catch(function (error) {\n        setUpToDate(false);\n        handleError(error);\n      });\n    } else {\n      sendAPI('APP', 'AP_UPD_SUIVI_ACTIVITE', {\n        'P_IDACTIVITE': IDActivite,\n        'P_IDSITE': IDSite,\n        'P_JOUR': IDJour,\n        'P_NOMBREBENEFICIAIRE': beneficiaireActivite,\n        'P_COMMENTAIRE': commentActivite\n      }, token).then(function () {\n        return setUpToDate(false);\n      }).catch(function (error) {\n        setUpToDate(false);\n        handleError(error);\n      });\n    }\n  };\n\n  var fctCommentaireAbsence = function fctCommentaireAbsence() {\n    setModalVisibleCommentaireAbsence(!modalVisibleCommentaireAbsence);\n    sendAPI('APP', 'AP_UPD_PRESENCE', {\n      \"P_IDBENEVOLE\": infoComment[3],\n      \"P_JOURPRESENCE\": infoComment[0],\n      \"P_IDACTIVITE\": infoComment[1],\n      \"P_IDSITE\": infoComment[2],\n      \"P_COMMENTAIRE\": comment\n    }, token).then(function (json) {\n      toastComponent(\"Statut : Absent\", \"normal\");\n      setUpToDate(false);\n      setComment(\"\");\n    }).catch(function (error) {\n      setUpToDate(false);\n      setComment(\"\");\n      handleError(error);\n    });\n  };\n\n  var changeAffichage = function changeAffichage() {\n    if (affichage == \"TOUT\") {\n      setAffichage(\"PRESENT\");\n      setIcone(\"check\");\n    } else if (affichage == \"PRESENT\") {\n      setAffichage(\"ABSENT\");\n      setIcone(\"x\");\n    } else if (affichage == \"ABSENT\") {\n      setAffichage(\"NONDEFINI\");\n      setIcone(\"unverified\");\n    } else {\n      setAffichage(\"TOUT\");\n      setIcone(\"person\");\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }\n  }, React.createElement(ModalContact, {\n    idDestinataire: idDestinataire,\n    visible: modalVisibleContact,\n    setVisible: setmodalVisibleContact,\n    mail: mail,\n    phone: phone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 10\n    }\n  }), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisibleCommentaireActivite,\n    onRequestClose: function onRequestClose() {\n      setmodalVisibleCommentaireActivite(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 11\n    }\n  }, React.createElement(ScrollView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }, React.createElement(ImageBackground, {\n    source: logoVide,\n    resizeMode: \"cover\",\n    style: [styles.modalContactView, {\n      width: 500,\n      maxWidth: \"95%\"\n    }],\n    imageStyle: styles.modalContactView2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: styles.modalContactTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 19\n    }\n  }, \"Nombre de B\\xE9n\\xE9ficiaire :\"), React.createElement(TextInput, {\n    style: [styles.input, {\n      borderWidth: 1,\n      width: \"100%\"\n    }],\n    onChangeText: handleChangeNumber,\n    value: beneficiaireActivite,\n    keyboardType: \"numeric\",\n    maxLength: 10,\n    onSubmitEditing: function onSubmitEditing() {\n      return refBenef.current.focus();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 19\n    }\n  }), React.createElement(Text, {\n    style: styles.modalContactTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 19\n    }\n  }, \"Commentaire d'activit\\xE9 :\"), React.createElement(TextInput, {\n    ref: refBenef,\n    multiline: true,\n    numberOfLines: 3,\n    style: [styles.input, {\n      borderWidth: 1,\n      width: \"100%\",\n      minHeight: 100\n    }],\n    onChangeText: setCommentActivite,\n    value: commentActivite,\n    onKeyUp: function onKeyUp(keyUp) {\n      return keyUp.keyCode == 17 && setMyCtrl(false);\n    },\n    onKeyPress: function onKeyPress(keyPress) {\n      !myCtrl && keyPress.keyCode == 13 && fctCommentaireActivite();\n      keyPress.keyCode == 13 && setCommentActivite(commentActivite + \"\\n\");\n      keyPress.keyCode == 17 && setMyCtrl(true);\n    },\n    maxLength: 299,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 19\n    }\n  }), React.createElement(View, {\n    style: styles.modalContactContentView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 19\n    }\n  }, React.createElement(Pressable, {\n    style: styles.button,\n    onPress: function onPress() {\n      return fctCommentaireActivite();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 21\n    }\n  }, function (_ref5) {\n    var pressed = _ref5.pressed;\n    return React.createElement(Text, {\n      style: [styles.textStyle, {\n        color: pressed ? \"lightgrey\" : \"black\",\n        fontWeight: \"bold\"\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 25\n      }\n    }, \"Valider\");\n  })))))), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisibleCommentaireAbsence,\n    onRequestClose: function onRequestClose() {\n      setModalVisibleCommentaireAbsence(false);\n      setComment(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }\n  }, React.createElement(ScrollView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 13\n    }\n  }, React.createElement(ImageBackground, {\n    source: logoVide,\n    resizeMode: \"cover\",\n    style: styles.modalContactView,\n    imageStyle: styles.modalContactView2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: styles.modalContactTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 17\n    }\n  }, \"Commentaire d'Absence :\"), React.createElement(TextInput, {\n    multiline: true,\n    numberOfLines: 3,\n    value: comment,\n    style: [styles.input, {\n      borderWidth: 1\n    }],\n    onChangeText: setComment,\n    placeholder: \"Raison de votre absence\",\n    autoCompleteType: \"off\",\n    onSelectionChange: function onSelectionChange(event) {\n      return setMyCarret(event.nativeEvent.selection.end);\n    },\n    onKeyUp: function onKeyUp(keyUp) {\n      return keyUp.keyCode == 17 && setMyCtrl(false);\n    },\n    onKeyPress: function onKeyPress(keyPress) {\n      !myCtrl && keyPress.keyCode == 13 && fctCommentaireAbsence();\n      keyPress.keyCode == 13 && setComment(comment.slice(0, myCarret) + \"\\n\" + comment.slice(myCarret));\n      keyPress.keyCode == 17 && setMyCtrl(true);\n    },\n    maxLength: 999,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 19\n    }\n  }), React.createElement(View, {\n    style: styles.modalContactButtonView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 17\n    }\n  }, React.createElement(Pressable, {\n    style: {\n      alignItems: \"center\",\n      padding: 10,\n      elevation: 2,\n      alignSelf: \"flex-end\"\n    },\n    onPress: function onPress() {\n      return fctCommentaireAbsence();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 19\n    }\n  }, function (_ref6) {\n    var pressed = _ref6.pressed;\n    return React.createElement(Text, {\n      style: [styles.textContactStyle, {\n        color: pressed ? \"lightgrey\" : \"black\",\n        textAlign: \"center\",\n        fontWeight: \"bold\"\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 23\n      }\n    }, \"Valider\");\n  }), React.createElement(Pressable, {\n    style: {\n      alignItems: \"center\",\n      padding: 10,\n      elevation: 2,\n      alignSelf: \"flex-start\"\n    },\n    onPress: function onPress() {\n      setModalVisibleCommentaireAbsence(!modalVisibleCommentaireAbsence);\n      setComment(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 19\n    }\n  }, function (_ref7) {\n    var pressed = _ref7.pressed;\n    return React.createElement(Text, {\n      style: [styles.textContactStyle, {\n        color: pressed ? \"lightgrey\" : \"black\",\n        textAlign: \"center\",\n        fontWeight: \"bold\"\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 23\n      }\n    }, \"Annuler\");\n  })))))), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisibleMailATous,\n    onRequestClose: function onRequestClose() {\n      setModalVisibleMailATous(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 11\n    }\n  }, React.createElement(ImageBackground, {\n    source: logoVide,\n    resizeMode: \"cover\",\n    style: styles.modalContactView,\n    imageStyle: styles.modalContactView2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.modalContactTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 15\n    }\n  }, \"Contacter tout le monde :\"), React.createElement(View, {\n    style: [styles.modalContactButtonView, {\n      minHeight: 100\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 15\n    }\n  }, React.createElement(Pressable, {\n    style: {\n      alignSelf: \"center\",\n      padding: 10\n    },\n    onPress: function onPress() {\n      return setModalVisibleMailATous(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 17\n    }\n  }, function (_ref8) {\n    var pressed = _ref8.pressed;\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: pressed ? \"lightgrey\" : \"black\",\n        fontWeight: \"bold\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 23\n      }\n    }, \"ANNULER\"));\n  }), Device.brand && React.createElement(Pressable, {\n    style: {\n      alignSelf: \"center\",\n      padding: 10\n    },\n    onPress: function onPress() {\n      setModalVisibleMailATous(false);\n      smsAll();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 34\n    }\n  }, function (_ref9) {\n    var pressed = _ref9.pressed;\n    return React.createElement(Text, {\n      style: [styles.textContactStyle, {\n        color: pressed ? \"lightgrey\" : \"black\",\n        fontWeight: \"bold\"\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 21\n      }\n    }, \"SMS\");\n  }), React.createElement(Pressable, {\n    style: {\n      alignSelf: \"center\",\n      padding: 10\n    },\n    onPress: function onPress() {\n      setModalVisibleMailATous(false);\n      fctModalMail(listeID());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 17\n    }\n  }, function (_ref10) {\n    var pressed = _ref10.pressed;\n    return React.createElement(Text, {\n      style: [styles.textContactStyle, {\n        color: pressed ? \"lightgrey\" : \"black\",\n        fontWeight: \"bold\"\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 21\n      }\n    }, \"MAIL\");\n  }))))), React.createElement(FlatList, {\n    data: visibleData,\n    ListHeaderComponent: React.createElement(React.Fragment, null, React.createElement(View, {\n      style: {\n        justifyContent: \"flex-start\",\n        padding: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: [styles.item, styles.activite, {\n        justifyContent: \"center\",\n        paddingTop: 10\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 19\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 21\n      }\n    }, \"Activit\\xE9 de \"), React.createElement(Text, {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 21\n      }\n    }, NomActivite, \" \"), React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 21\n      }\n    }, \"\\xE0 \"), React.createElement(Text, {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 21\n      }\n    }, NomSite, \" \"), React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 21\n      }\n    }, \"le \"), React.createElement(Text, {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 21\n      }\n    }, IDJour.split(\" \")[0].split(\"-\")[2], \"/\", IDJour.split(\" \")[0].split(\"-\")[1], \"/\", IDJour.split(\" \")[0].split(\"-\")[0], \" \"))), React.createElement(View, {\n      style: [styles.ligne, styles.browser],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 17\n      }\n    }), idRole == \"2\" && React.createElement(View, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 19\n      }\n    }, React.createElement(View, {\n      style: [styles.item, styles.activite, {\n        justifyContent: \"space-evenly\"\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 21\n      }\n    }, React.createElement(Pressable, {\n      testID: \"infoActivite\",\n      onPress: function onPress() {\n        sendAPI('APP', 'AP_LST_SUIVI_ACTIVITE', {\n          'P_IDACTIVITE': IDActivite,\n          'P_IDSITE': IDSite,\n          'P_JOUR': IDJour\n        }, token).then(function (json) {\n          if (json.length != 0) {\n            setInfoActivite(1);\n            setCommentActivite(json[0].commentaire);\n            setBeneficiaireActivite(json[0].nombre_beneficiaire || \"0\");\n            setLoading(false);\n            setUpToDate(true);\n          } else {\n            setInfoActivite(0);\n            setCommentActivite(\"\");\n            setBeneficiaireActivite(\"0\");\n            setLoading(false);\n            setUpToDate(true);\n          }\n        }).catch(function (error) {\n          setLoading(false);\n          setUpToDate(true);\n          handleError(error);\n        });\n        setmodalVisibleCommentaireActivite(true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 23\n      }\n    }, function (_ref11) {\n      var pressed = _ref11.pressed;\n      return React.createElement(Icon, {\n        name: \"comment-discussion\",\n        size: 30,\n        color: pressed ? 'darkslategrey' : 'black',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 29\n        }\n      });\n    }), React.createElement(Pressable, {\n      testID: \"messageAll\",\n      onPress: function onPress() {\n        return setModalVisibleMailATous(true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 23\n      }\n    }, function (_ref12) {\n      var pressed = _ref12.pressed;\n      return React.createElement(Icon, {\n        name: \"megaphone\",\n        size: 30,\n        color: pressed ? 'darkslategrey' : 'black',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 27\n        }\n      });\n    }), React.createElement(Pressable, {\n      testID: \"ajoutBenevole\",\n      onPress: function onPress() {\n        return versListe({\n          navigation: navigation\n        }, data);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 23\n      }\n    }, function (_ref13) {\n      var pressed = _ref13.pressed;\n      return React.createElement(Icon, {\n        name: \"plus\",\n        size: 30,\n        color: pressed ? 'darkslategrey' : 'black',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 27\n        }\n      });\n    }), React.createElement(Pressable, {\n      testID: \"changeAffichage\",\n      onPress: function onPress() {\n        return changeAffichage();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 23\n      }\n    }, function (_ref14) {\n      var pressed = _ref14.pressed;\n      return React.createElement(Icon, {\n        name: icone,\n        size: 30,\n        color: pressed ? 'darkslategrey' : 'black',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 27\n        }\n      });\n    })), React.createElement(View, {\n      style: [styles.ligne, styles.browser],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 21\n      }\n    }))), React.createElement(View, {\n      style: [styles.header, {\n        paddingRight: 5\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: {\n        width: '50%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: [styles.headerTitle, {\n        textAlign: \"left\",\n        marginLeft: 5\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 19\n      }\n    }, \"Pr\\xE9nom/Nom\")), React.createElement(View, {\n      style: {\n        width: '50%',\n        justifyContent: \"flex-end\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: [styles.headerTitle, {\n        textAlign: \"right\",\n        paddingRight: 20\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 19\n      }\n    }, \"Pr\\xE9sence/Contacter\")))),\n    renderItem: renderItem,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 9\n    }\n  })), isLoading && React.createElement(View, {\n    style: styles.loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 9\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#e92682\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 11\n    }\n  }))));\n}\n\nvar normalizeInputNumber = function normalizeInputNumber(value, previousValue) {\n  if (!value || value == 0) return '0';\n  var currentValue = value.replace(/[^\\d]/g, '').replace(/^0+/g, '');\n\n  if (currentValue.length === 0) {\n    return '0';\n  } else {\n    return currentValue;\n  }\n};\n\nexport default activiteScreen;\nexport { normalizeInputNumber };","map":{"version":3,"names":["React","useEffect","useState","useRef","traitementFilter","userContext","useToast","sendAPI","Icon","Device","constantes","styles","ModalContact","ViewStatus","logoVide","activiteScreen","route","navigation","toast","refBenef","myCtrl","setMyCtrl","myCarret","setMyCarret","isLoading","setLoading","data","setData","upToDate","setUpToDate","modalVisibleCommentaireAbsence","setModalVisibleCommentaireAbsence","modalVisibleCommentaireActivite","setmodalVisibleCommentaireActivite","modalVisibleContact","setmodalVisibleContact","modalVisibleMailATous","setModalVisibleMailATous","icone","setIcone","comment","setComment","infoComment","setInfoComment","infoActivite","setInfoActivite","commentActivite","setCommentActivite","beneficiaireActivite","setBeneficiaireActivite","affichage","setAffichage","visibleData","setVisibleData","mail","setMail","phone","setPhone","idDestinataire","setIdDestinataire","userID","useContext","token","params","IDActivite","IDSite","IDJour","NomActivite","NomSite","idRole","handleError","fctModalMail","versListe","liste","navigate","unsubscribe","addListener","then","json","catch","error","renderItem","item","nomrole","justifyContent","flexDirection","marginLeft","paddingLeft","prenom","nom","paddingRight","changerStatut","BDD","etat","idbenevole","commentaire","marginRight","email","telephone","pressed","statusIcon","bdd","statut","benevole","jour","activite","site","role","texte","toastComponent","handleChangeNumber","value","normalizeInputNumber","listeID","ids","d","push","smsAll","phones","slice","url","Platform","OS","Linking","canOpenURL","supported","openURL","type","show","position","duration","offset","animationType","fctCommentaireActivite","fctCommentaireAbsence","changeAffichage","container","flex","centeredView","modalContactView","width","maxWidth","modalContactView2","modalContactTitle","input","borderWidth","current","focus","minHeight","keyUp","keyCode","keyPress","modalContactContentView","button","textStyle","color","fontWeight","event","nativeEvent","selection","end","modalContactButtonView","alignItems","padding","elevation","alignSelf","textContactStyle","textAlign","brand","paddingTop","split","ligne","browser","length","nombre_beneficiaire","header","headerTitle","index","toString","loading","previousValue","currentValue","replace"],"sources":["/home/vats/Resto_config_2022/appconfig_bis/src/screens/Activite/index.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { ActivityIndicator, FlatList, Text, View, ScrollView, ImageBackground} from 'react-native';\nimport {SafeAreaView, Pressable, Modal, TextInput} from 'react-native';\nimport {Linking, Platform} from 'react-native';\n\nimport {traitementFilter} from '../../components/pickerActivite';\nimport {userContext} from '../../contexts/userContext';\n\nimport { useToast } from \"react-native-toast-notifications\";\nimport {sendAPI} from '../../components/sendAPI';\n//import RNPickerSelect from 'react-native-picker-select';\n\nimport Icon from 'react-native-vector-icons/Octicons';\nimport * as Device from 'expo-device';\n\nimport constantes from '../../constantes';\nimport styles from '../../styles';\nimport ModalContact from '../../components/modalContact';\nimport ViewStatus from '../../components/viewStatut';\n\nimport logoVide from '../../../assets/logovide.png';\n\n\n// Fonction Principale\nfunction activiteScreen({route, navigation}) {\n\n  // Toast\n  const toast = useToast();\n\n  const refBenef = useRef(null);\n  //const refMailTxt = useRef(null);\n\n  const [myCtrl, setMyCtrl] = useState(false);\n  const [myCarret, setMyCarret] = useState(0);\n\n  // basic\n  const [isLoading, setLoading] = useState(true);\n  const [data, setData] = useState([]);\n\n  // Reload\n  const [upToDate, setUpToDate] = useState(true);\n  \n  // Pour le pop up de commentaire\n  const [modalVisibleCommentaireAbsence, setModalVisibleCommentaireAbsence] = useState(false);\n  const [modalVisibleCommentaireActivite, setmodalVisibleCommentaireActivite] = useState(false);\n  const [modalVisibleContact, setmodalVisibleContact] = useState(false);\n  const [modalVisibleMailATous, setModalVisibleMailATous] = useState(false);\n\n  // Icone\n  const [icone, setIcone] = useState('person');\n\n  // Pour le commentaire\n  const [comment, setComment] = useState('');\n  const [infoComment, setInfoComment] = useState(['', '', '', '']);\n\n  // Commentaire d'activité\n  const [infoActivite, setInfoActivite] = useState('');\n  const [commentActivite, setCommentActivite] = useState('');\n  const [beneficiaireActivite, setBeneficiaireActivite] = useState(\"0\");\n \n  // Mode d'affichage\n  const [affichage, setAffichage] = useState(\"TOUT\"); // (\"TOUT\", \"PRESENT\", \"ABSENT\", \"NONDEFINI\");\n  const [visibleData, setVisibleData] = useState('');\n  //const [picker, setPicker] = useState(\"prenom\");\n\n  //Données pour le modal de contact\n  const [mail, setMail] = useState('');\n  const [phone, setPhone] = useState('');\n\n  // Mail Txt\n  const [idDestinataire, setIdDestinataire] = useState();\n\n  // On charge l'id de l'utilisateur courrant\n  const userID = React.useContext(userContext).userID;\n  const token = React.useContext(userContext).token;\n  \n  // On récupère les informations données en paramètres\n  const { IDActivite, IDSite, IDJour, NomActivite, NomSite, idRole } = route.params;\n\n  //Handler des erreurs de serveur\n  const handleError = React.useContext(userContext).handleError;\n\n  // On récupère la fonction pour gérer le modal d'Email\n  const fctModalMail = React.useContext(userContext).fctModalMail;\n\n  // Fonction de sélection de l'activité\n  function versListe({navigation}, liste) {\n  \tnavigation.navigate('ListeUtilisateur', {\n  \t  IDActivite: IDActivite, IDSite: IDSite, IDJour: IDJour, liste: liste\n  \t});\n  }\n\n  // On va chercher les données\n  useEffect(() => {\n    // Lors du focus de la page\n    const unsubscribe = navigation.addListener('focus', () => {\n\t  setLoading(true);\n\t  sendAPI('APP', 'AP_LST_PRE_EQU', {'P_IDACTIVITE':IDActivite, 'P_IDSITE':IDSite, 'P_JOUR':IDJour },token)\n\t  .then((json) =>  {setData(json); setLoading(false); setUpToDate(true)})\n\t  .catch((error) => {setLoading(false); setUpToDate(true); handleError (error)});\n    });\n\n    // Return the function to unsubscribe from the event so it gets removed on unmount\n    return unsubscribe;\n    \n  }, [navigation]);\n\n  // Lors d'un changement\n  useEffect(() => {\n    if(!upToDate){\n\t  setLoading(true);\n      // Update la liste\n\t  sendAPI('APP', 'AP_LST_PRE_EQU', {'P_IDACTIVITE':IDActivite, 'P_IDSITE':IDSite, 'P_JOUR':IDJour},token)\n      .then((json) =>  {setData(json); setLoading(false); setUpToDate(true);})\n      .catch((error) => {setLoading(false); setUpToDate(true); handleError (error)});\n\n      // Update commentaire d'activité (dans le fetch au dessus)\n    }\n    \n  }, [upToDate]);\n  \n  \n\n  // on met à jour la liste visible\n  useEffect(() => {\n    \n    //const tr = traitementSort(picker.toUpperCase(), data, data, 0, 0, 4, 3, 0);\n\n    setVisibleData( traitementFilter(affichage, data, 6) );\n\n  }, [data, affichage]);\n\n  // On crée le renderer pour la flatlist\n  const renderItem = ({ item }) => (\n    // Conteneur Principal de chaque item\n    <View style={[styles.item, styles[item.nomrole]]}>\n\n      {/* Conteneur 1ere colonne */}\n      <View style={{ justifyContent:\"space-evenly\", flexDirection: \"column\", marginLeft: 10, paddingLeft: \"5%\"}}>\n        <Text>{item.prenom}</Text>\n        <Text>{item.nom}</Text>\n      </View>\n      \n      <View style={{flexDirection: \"row\", paddingRight: \"1%\", justifyContent: \"flex-end\"}}>\n        {/* Conteneur 2eme colonne (modifiable : status + commentaire)*/}\n        <ViewStatus fctStatut={() => changerStatut(constantes.BDD, item.etat, item.idbenevole, IDJour, IDActivite, IDSite, (item.nomrole == \"BENEVOLE\") ? \"1\" : \"2\")}\n                    fctCommentaire={() => {setModalVisibleCommentaireAbsence(true); setComment(item.commentaire);  setInfoComment([ IDJour, IDActivite, IDSite, item.idbenevole ])}}\n                    status={item.etat} role={idRole} align=\"row\" id1={userID} id2={item.idbenevole} commentaire = {item.commentaire}/>\n\n        {/* Conteneur 3eme colonne */}\n\n        <View style={{justifyContent: \"space-evenly\", marginRight: 0}}>\n          <Pressable onPress={() => {setMail(item.email); setPhone(item.telephone); setIdDestinataire(item.idbenevole); setmodalVisibleContact(!modalVisibleContact)} }>\n            {({ pressed }) => (\n              <Icon \n                name='mail' \n                size={32}\n                color={pressed?'darkslategrey':'black'}\n                style={styles.statusIcon}\n              />\n            )}\n          </Pressable>\n         \n        </View>\n      </View>\n    </View>\n  );\n\n\n  // Fonction de changement de statut\n  const changerStatut = (bdd, statut, benevole, jour, activite, site, role) => {\n\n    // Si absent\n    if(statut == \"Absent\"){\n      sendAPI('APP', 'AP_DEL_PRESENCE', {\"P_IDBENEVOLE\":benevole, \"P_JOURPRESENCE\":jour, \"P_IDACTIVITE\":activite, \"P_IDSITE\":site},token)\n      .then((texte) =>  {toastComponent(\"Statut : Non défini\", \"warning\"); setUpToDate(false)})\n      .catch((error) => {setUpToDate(false); handleError (error)});\n    }\n\n    // Si présent\n    else if(statut == \"Présent\"){\n\n      setInfoComment([ jour, activite, site, benevole ]);\n      //On rend le modal visible\n      setModalVisibleCommentaireAbsence(true);\n      \n      // Le traitement se fait sur le modal afin d'éviter les désynchronisations\n\n    }\n\n    // Si non-défini\n    else{\n\t  sendAPI('APP', 'AP_INS_PRESENCE', {\"P_IDBENEVOLE\":benevole, \"P_JOURPRESENCE\":jour, \"P_IDACTIVITE\":activite, \"P_IDSITE\":site, \"P_IDROLE\":role},token)\n\t  .then((texte) =>  {toastComponent(\"Statut : Présent\", \"success\"); setUpToDate(false)})\n\t  .catch((error) => {setUpToDate(false); handleError (error)});\n    }\n  }\n\n  const handleChangeNumber = ( value ) => { \n    setBeneficiaireActivite( normalizeInputNumber(value, beneficiaireActivite) );\n  };\n\n  // retourne la liste des ids des bénévoles\n  const listeID = () => { \n\n    var ids = []\n    for(let d of data){\n      if(d.idbenevole != userID){\n        ids.push(d.idbenevole);\n      }\n    }\n\n    return ids;\n  };\n\n  // préparation des numéro pour envoie collectif\n  const smsAll = (  ) => { \n\n    var phones = \"\";\n    for(let d of data){\n      phones += d.telephone + \",\";\n    }\n    phones = phones.slice(0, -1);\n\n    const url = (Platform.OS === 'android')\n    ? `sms:${phones}?body=`\n    : `sms:/open?addresses=${phones}&body=`;\n\n  Linking.canOpenURL(url).then((supported) => {\n    if (!supported) {\n      throw \"L'envoi de SMS n'est pas supporté sur cet appareil\";\n    } else {\n      Linking.openURL(url);\n    }\n  }).catch();\n}\n\n  // Affiche le toast\n  const toastComponent = (texte, type) => {\n        \n    toast.show(texte, {\n        type: type,\n        position: \"bottom\",\n        duration: 2000,\n        offset: 30,\n        animationType: \"zoom-in\",\n      });\n  };\n\n  const fctCommentaireActivite = () => {\n    setmodalVisibleCommentaireActivite(false)\n    if(infoActivite == 0){\n\t  sendAPI('APP', 'AP_INS_SUIVI_ACTIVITE', {'P_IDACTIVITE':IDActivite, 'P_IDSITE':IDSite, 'P_JOUR':IDJour, 'P_NOMBREBENEFICIAIRE':beneficiaireActivite, 'P_COMMENTAIRE':commentActivite},token)\n\t  .then(() =>  setUpToDate(false))\n\t  .catch((error) => {setUpToDate(false); handleError (error)});\n    }\n    else{\n\t  sendAPI('APP', 'AP_UPD_SUIVI_ACTIVITE', {'P_IDACTIVITE':IDActivite, 'P_IDSITE':IDSite, 'P_JOUR':IDJour, 'P_NOMBREBENEFICIAIRE':beneficiaireActivite, 'P_COMMENTAIRE':commentActivite},token)\n\t  .then(() => setUpToDate(false))\n\t  .catch((error) => {setUpToDate(false); handleError (error)});\n    }\n  }\n\n  const fctCommentaireAbsence = () => {\n    setModalVisibleCommentaireAbsence(!modalVisibleCommentaireAbsence);\n    sendAPI('APP', 'AP_UPD_PRESENCE', {\"P_IDBENEVOLE\":infoComment[3], \"P_JOURPRESENCE\":infoComment[0], \"P_IDACTIVITE\":infoComment[1], \"P_IDSITE\":infoComment[2], \"P_COMMENTAIRE\":comment},token)\n\t.then((json) =>  {toastComponent(\"Statut : Absent\", \"normal\"); setUpToDate(false); setComment(\"\")})\n\t.catch((error) => {setUpToDate(false); setComment(\"\"); handleError (error)});\n\n  }\n\n  // change l'affichage\n  const changeAffichage = () => {\n    if(affichage == \"TOUT\"){\n      setAffichage(\"PRESENT\");\n      setIcone(\"check\");\n    }\n    else if(affichage == \"PRESENT\"){\n      setAffichage(\"ABSENT\");\n      setIcone(\"x\");\n    }\n    else if(affichage == \"ABSENT\"){\n      setAffichage(\"NONDEFINI\");\n      setIcone(\"unverified\");\n    }\n    else{\n      setAffichage(\"TOUT\");\n      setIcone(\"person\");\n    }\n    \n    \n  }\n\n  // On retourne la flatlist\n  return (\n    <>\n      <SafeAreaView style={styles.container}>\t  \n        <View style={{flex: 1}}>\n\t        <ModalContact idDestinataire={idDestinataire} visible={modalVisibleContact} setVisible={setmodalVisibleContact} mail={mail} phone={phone}/>\n          \n          <Modal\n            animationType=\"slide\"\n            transparent={true}\n            visible={modalVisibleCommentaireActivite}\n            onRequestClose={() => {setmodalVisibleCommentaireActivite(false)}}\n          >\n            <ScrollView >\n              <View style={styles.centeredView}>\n                <ImageBackground source={logoVide} resizeMode=\"cover\" style={[styles.modalContactView, {width: 500, maxWidth: \"95%\"}]} imageStyle={styles.modalContactView2}>\n                  <Text style={styles.modalContactTitle}>Nombre de Bénéficiaire :</Text>\n                  <TextInput\n                    style={[styles.input, {borderWidth: 1, width:\"100%\"}]}\n                    onChangeText={handleChangeNumber}\n                    value={beneficiaireActivite}\n                    keyboardType=\"numeric\"\n                    maxLength={10}\n                    onSubmitEditing={() => refBenef.current.focus()}\n                  />\n                  <Text style={styles.modalContactTitle}>Commentaire d'activité :</Text>\n                  <TextInput\n                    ref={refBenef}\n                    multiline\n                    numberOfLines={3}\n                    style={[styles.input, {borderWidth: 1, width:\"100%\", minHeight: 100}]}\n                    onChangeText={setCommentActivite}\n                    value={commentActivite}\n                    onKeyUp={(keyUp) => keyUp.keyCode == 17 && setMyCtrl(false)}\n                    onKeyPress={(keyPress) => { (!myCtrl && keyPress.keyCode == 13) && fctCommentaireActivite();\n                                                (keyPress.keyCode == 13) && setCommentActivite(commentActivite + \"\\n\");\n                                                keyPress.keyCode == 17 && setMyCtrl(true)} }\n                    maxLength={299}\n                  />\n                  <View style={styles.modalContactContentView}>\n                    <Pressable\n                      style={styles.button}\n                      // écrire et envoyer le commentaire\n                      onPress={() => fctCommentaireActivite()}\n                    >\n                      {({ pressed }) => (\n                        <Text style={[styles.textStyle, {color:pressed?\"lightgrey\":\"black\", fontWeight: \"bold\"}]}>Valider</Text>\n                      )}\n                    </Pressable>\n                  </View>\n                </ImageBackground>\n              </View>\n            </ScrollView>\n          </Modal>\n        \n\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={modalVisibleCommentaireAbsence}\n          onRequestClose={() => {setModalVisibleCommentaireAbsence(false); setComment(\"\")}}\n        >\n          <ScrollView >\n            <View style={styles.centeredView}>\n              <ImageBackground source={logoVide} resizeMode=\"cover\" style={styles.modalContactView} imageStyle={styles.modalContactView2}>\n                <Text style={styles.modalContactTitle}>Commentaire d'Absence :</Text>\n                  <TextInput\n                    multiline\n                    numberOfLines={3}\n                    value={comment}\n                    style={[styles.input, {borderWidth: 1}]}\n                    onChangeText={setComment}\n                    placeholder=\"Raison de votre absence\"\n                    autoCompleteType=\"off\"\n                    onSelectionChange={(event) => setMyCarret(event.nativeEvent.selection.end)}\n                    onKeyUp={(keyUp) => keyUp.keyCode == 17 && setMyCtrl(false)}\n                    onKeyPress={(keyPress) => { (!myCtrl && keyPress.keyCode == 13) && fctCommentaireAbsence();\n                                                (keyPress.keyCode == 13) && setComment(comment.slice(0, myCarret) + \"\\n\" + comment.slice(myCarret));\n                                                keyPress.keyCode == 17 && setMyCtrl(true)} }\n                    maxLength={999}\n                  />\n              \n                <View style={styles.modalContactButtonView}>\n                  <Pressable\n                    style={{alignItems: \"center\", padding: 10, elevation: 2, alignSelf: \"flex-end\"}}\n                    // écrire et envoyer le commentaire\n                    onPress={() => fctCommentaireAbsence()}\n                  >\n                    {({ pressed }) => (\n                      <Text style={[styles.textContactStyle, {color:pressed?\"lightgrey\":\"black\", textAlign: \"center\", fontWeight: \"bold\"}]}>Valider</Text>\n                    )}\n                  </Pressable>\n\n                  <Pressable\n                    style={{alignItems: \"center\", padding: 10, elevation: 2, alignSelf: \"flex-start\"}}\n                    onPress={() => {setModalVisibleCommentaireAbsence(!modalVisibleCommentaireAbsence);\n                                    setComment(\"\");}}\n                  >\n                    {({ pressed }) => (\n                      <Text style={[styles.textContactStyle, {color:pressed?\"lightgrey\":\"black\", textAlign: \"center\", fontWeight: \"bold\"}]}>Annuler</Text>\n                    )}\n                  </Pressable>\n                </View>\n              </ImageBackground>\n            </View>\n          </ScrollView>\n        </Modal>\n\n\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={modalVisibleMailATous}\n          onRequestClose={() => {setModalVisibleMailATous(false)}}\n        >\n          <View style={styles.centeredView}>\n            <ImageBackground source={logoVide} resizeMode=\"cover\" style={styles.modalContactView} imageStyle={styles.modalContactView2}>\n              <Text style={styles.modalContactTitle}>Contacter tout le monde :</Text>\n              \n              <View style={[styles.modalContactButtonView, {minHeight: 100}]}>\n                <Pressable\n                  style={{alignSelf: \"center\", padding: 10}}\n                  onPress={() => setModalVisibleMailATous(false)}\n                >\n                  {({ pressed }) => (\n                    <View>\n                      <Text style={{color:pressed?\"lightgrey\":\"black\", fontWeight: \"bold\"}}>ANNULER</Text>\n                    </View>\n                  )}\n                </Pressable>\n                {Device.brand && <Pressable\n                  style={{alignSelf: \"center\", padding: 10}}\n                  onPress={() => {setModalVisibleMailATous(false); smsAll()}}\n                >\n                  {({ pressed }) => (\n                    <Text style={[styles.textContactStyle, {color:pressed?\"lightgrey\":\"black\", fontWeight: \"bold\"}]}>SMS</Text>\n                  )}\n                </Pressable>}\n                <Pressable\n                  style={{alignSelf: \"center\", padding: 10}}\n                  onPress={() => {setModalVisibleMailATous(false); fctModalMail(listeID())}}\n                >\n                  {({ pressed }) => (\n                    <Text style={[styles.textContactStyle, {color:pressed?\"lightgrey\":\"black\", fontWeight: \"bold\"}]}>MAIL</Text>\n                  )}\n                </Pressable>\n              </View>\n              \n            </ImageBackground>\n          </View>\n        </Modal>\n\n\n        <FlatList\n          data={visibleData}\n          ListHeaderComponent={\n            <>\n              <View style={{justifyContent:\"flex-start\", padding: 0}}>\n                {/* Info générales */}\n                <View style={[styles.item, styles.activite, {justifyContent: \"center\", paddingTop: 10}]}>\n                  <Text>\n                    <Text>Activité de </Text>\n                    <Text style={{fontWeight: \"bold\"}}>{NomActivite} </Text>\n                    <Text>à </Text>\n                    <Text style={{fontWeight: \"bold\"}}>{NomSite} </Text>\n                    <Text>le </Text>\n                    <Text style={{fontWeight: \"bold\"}}>{IDJour.split(\" \")[0].split(\"-\")[2]}/\n                                                        {IDJour.split(\" \")[0].split(\"-\")[1]}/\n                                                        {IDJour.split(\" \")[0].split(\"-\")[0]} </Text>\n                  </Text>\n\n                </View>\n                <View style={[styles.ligne, styles.browser]}/>\n\n                {/* Icone d'administraion si référent */}\n                {(idRole == \"2\") &&\t\n                  <View>\n\n                    <View style={[styles.item, styles.activite, {justifyContent: \"space-evenly\"}]}>\n\n                      <Pressable testID = \"infoActivite\" onPress={() =>  {\n                        sendAPI('APP', 'AP_LST_SUIVI_ACTIVITE', {'P_IDACTIVITE':IDActivite, 'P_IDSITE':IDSite, 'P_JOUR':IDJour},token)\n                        .then((json) =>  {if( json.length != 0 ){\n                          setInfoActivite(1);\n                          setCommentActivite(json[0].commentaire); setBeneficiaireActivite(json[0].nombre_beneficiaire || \"0\");\n                          setLoading(false); setUpToDate(true);}\n                          else{\n                            setInfoActivite(0);\n                            setCommentActivite(\"\"); setBeneficiaireActivite(\"0\");\n                            setLoading(false); setUpToDate(true);\n                          }})\n                        .catch((error) => {setLoading(false); setUpToDate(true); handleError (error)});\n\n                        setmodalVisibleCommentaireActivite(true)}}>\n                          {({ pressed }) => (\n                            <Icon \n                              name='comment-discussion' //repo\n                              size={30}\n                              color={pressed?'darkslategrey':'black'}\n                            />\n                          )}\n                      </Pressable>\n\n                      <Pressable testID = \"messageAll\" onPress={() => setModalVisibleMailATous(true)}>\n                        {({ pressed }) => (\n                          <Icon \n                            name='megaphone' \n                            size={30}\n                            color={pressed?'darkslategrey':'black'}\n                          />\n                        )}\n                      </Pressable>\n\n                      <Pressable testID = \"ajoutBenevole\" onPress={() => versListe({navigation}, data)}>\n                        {({ pressed }) => (\n                          <Icon \n                            name='plus'\n                            size={30}\n                            color={pressed?'darkslategrey':'black'}\n                          />\n                        )}\n                      </Pressable>\n\n                      <Pressable testID = \"changeAffichage\" onPress={() => changeAffichage()}>\n                        {({ pressed }) => (\n                          <Icon \n                            name={icone}\n                            size={30}\n                            color={pressed?'darkslategrey':'black'}\n                          />\n                        )}\n                      </Pressable>\n                    \n                    </View>\n                    <View style={[styles.ligne, styles.browser]}/>\n                  </View>\n                  \n                }\n\n              </View>\n              \n\n              {/* \"header\" de la flatlist */}\n              {/* <View style={[ styles.item, styles.activite, {paddingLeft: 10}]}>\n                <Text style={[styles.info, {fontWeight: \"bold\"}]}>Liste des Engagés :</Text>\n              </View> */}\n\n              {/* Réordonnancement - Sélection */}\n              {/* <View style={{alignSelf: \"center\", width: \"100%\", maxWidth: 550, paddingTop: 5, flexDirection: \"row\", justifyContent: \"space-between\"}}>\n                \n                <RNPickerSelect\n                  placeholder={{}}\n                  useNativeAndroidPickerStyle={true}\n                  onValueChange={(itemValue, itemIndex) =>\n                    {setPicker(itemValue);\n                    setVisibleData( traitementSort(itemValue, data, visibleData, 0, 0, 4, 3, 0) );}\n                  }\n                  selectedValue={picker}\n                  items={[\n                      { label: 'prénom', value: 'PRENOM' },\n                      { label: 'nom', value: 'NOM' },\n                  ]}\n                  style={pickerSelectStyles}\n                  InputAccessoryView={() => null}\n                />\n\n                <RNPickerSelect\n                  placeholder={{}}\n                  useNativeAndroidPickerStyle={true}\n                  onValueChange={(itemValue, itemIndex) =>\n                    setAffichage(itemValue)\n                  }\n                  selectedValue={affichage}\n                  items={[\n                      { label: 'tout', value: 'TOUT' },\n                      { label: 'présent', value: 'PRESENT' },\n                      { label: 'absent', value: 'ABSENT' },\n                      { label: 'non défini', value: 'NONDEFINI' },\n                  ]}\n                  style={pickerSelectStyles}\n                  InputAccessoryView={() => null}\n                />\n\n              </View> */}\n\n\n              {/*Header de la flatlist*/}\n              <View style = {[styles.header,{paddingRight: 5}]}>\n                <View style={{width:'50%'}}>\n                  <Text style = {[styles.headerTitle, {textAlign: \"left\",  marginLeft: 5}]}>Prénom/Nom</Text>\n                </View>\n                <View style={{width:'50%', justifyContent: \"flex-end\"}}>\n                  <Text style = {[styles.headerTitle, {textAlign: \"right\", paddingRight: 20}]}>Présence/Contacter</Text>\n                </View>\n              </View>\n            </>\n          }\n          renderItem={renderItem}\n          keyExtractor={(item, index) => index.toString()}\n        />\n      </View>\n\t  {isLoading &&\n        <View style={styles.loading}>\n          <ActivityIndicator size=\"large\" color=\"#e92682\" />\n        </View>\n\t  }\n    </SafeAreaView>\n\t</>\n  );\n}\n\n\n// Number only\nconst normalizeInputNumber = (value, previousValue) => {\n  \n  if (!value || value == 0 ) return '0';\n  const currentValue = value.replace(/[^\\d]/g, '').replace(/^0+/g, '');\n\n  if( currentValue.length === 0 ){\n    return '0';\n  }\n  else {\n    return currentValue;\n  }\n  \n};\n\n// On exporte la fonction principale\nexport default activiteScreen;\nexport {normalizeInputNumber};\n\n// Style\n/* const pickerSelectStyles = StyleSheet.create({\n  inputIOS: {\n    margin: 20,\n    fontSize: 16,\n    width: 160,\n    height: 40,\n    paddingHorizontal: 10,\n    paddingVertical: 8,\n    borderWidth: 0.5,\n    borderColor: 'black',\n    borderRadius: 8,\n    color: 'black',\n  },\n\n  inputAndroid: {\n    margin: 20,\n    fontSize: 16,\n    width: 160,\n    height: 40,\n    paddingHorizontal: 10,\n    paddingVertical: 8,\n    borderWidth: 0.5,\n    borderColor: 'black',\n    borderRadius: 8,\n    color: 'black',\n  },\n  inputWeb: {\n    margin: 20,\n    fontSize: 16,\n    width: 160,\n    height: 40,\n    paddingHorizontal: 10,\n    paddingVertical: 8,\n    borderWidth: 0.5,\n    borderColor: 'black',\n    borderRadius: 8,\n    color: 'black',\n  }\n});\n */"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,MAArC,QAAmD,OAAnD;;;;;;;;;;;;;AAKA,SAAQC,gBAAR;AACA,SAAQC,WAAR;AAEA,SAASC,QAAT,QAAyB,kCAAzB;AACA,SAAQC,OAAR;AAGA,OAAOC,IAAP;AACA,OAAO,KAAKC,MAAZ,MAAwB,aAAxB;AAEA,OAAOC,UAAP;AACA,OAAOC,MAAP;AACA,OAAOC,YAAP;AACA,OAAOC,UAAP;AAEA,OAAOC,QAAP;;AAIA,SAASC,cAAT,OAA6C;EAAA;;EAAA,IAApBC,KAAoB,QAApBA,KAAoB;EAAA,IAAbC,UAAa,QAAbA,UAAa;EAG3C,IAAMC,KAAK,GAAGZ,QAAQ,EAAtB;EAEA,IAAMa,QAAQ,GAAGhB,MAAM,CAAC,IAAD,CAAvB;;EAGA,gBAA4BD,QAAQ,CAAC,KAAD,CAApC;EAAA;EAAA,IAAOkB,MAAP;EAAA,IAAeC,SAAf;;EACA,iBAAgCnB,QAAQ,CAAC,CAAD,CAAxC;EAAA;EAAA,IAAOoB,QAAP;EAAA,IAAiBC,WAAjB;;EAGA,iBAAgCrB,QAAQ,CAAC,IAAD,CAAxC;EAAA;EAAA,IAAOsB,SAAP;EAAA,IAAkBC,UAAlB;;EACA,iBAAwBvB,QAAQ,CAAC,EAAD,CAAhC;EAAA;EAAA,IAAOwB,IAAP;EAAA,IAAaC,OAAb;;EAGA,iBAAgCzB,QAAQ,CAAC,IAAD,CAAxC;EAAA;EAAA,IAAO0B,QAAP;EAAA,IAAiBC,WAAjB;;EAGA,kBAA4E3B,QAAQ,CAAC,KAAD,CAApF;EAAA;EAAA,IAAO4B,8BAAP;EAAA,IAAuCC,iCAAvC;;EACA,kBAA8E7B,QAAQ,CAAC,KAAD,CAAtF;EAAA;EAAA,IAAO8B,+BAAP;EAAA,IAAwCC,kCAAxC;;EACA,kBAAsD/B,QAAQ,CAAC,KAAD,CAA9D;EAAA;EAAA,IAAOgC,mBAAP;EAAA,IAA4BC,sBAA5B;;EACA,kBAA0DjC,QAAQ,CAAC,KAAD,CAAlE;EAAA;EAAA,IAAOkC,qBAAP;EAAA,IAA8BC,wBAA9B;;EAGA,kBAA0BnC,QAAQ,CAAC,QAAD,CAAlC;EAAA;EAAA,IAAOoC,KAAP;EAAA,IAAcC,QAAd;;EAGA,kBAA8BrC,QAAQ,CAAC,EAAD,CAAtC;EAAA;EAAA,IAAOsC,OAAP;EAAA,IAAgBC,UAAhB;;EACA,kBAAsCvC,QAAQ,CAAC,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CAAD,CAA9C;EAAA;EAAA,IAAOwC,WAAP;EAAA,IAAoBC,cAApB;;EAGA,kBAAwCzC,QAAQ,CAAC,EAAD,CAAhD;EAAA;EAAA,IAAO0C,YAAP;EAAA,IAAqBC,eAArB;;EACA,kBAA8C3C,QAAQ,CAAC,EAAD,CAAtD;EAAA;EAAA,IAAO4C,eAAP;EAAA,IAAwBC,kBAAxB;;EACA,kBAAwD7C,QAAQ,CAAC,GAAD,CAAhE;EAAA;EAAA,IAAO8C,oBAAP;EAAA,IAA6BC,uBAA7B;;EAGA,kBAAkC/C,QAAQ,CAAC,MAAD,CAA1C;EAAA;EAAA,IAAOgD,SAAP;EAAA,IAAkBC,YAAlB;;EACA,kBAAsCjD,QAAQ,CAAC,EAAD,CAA9C;EAAA;EAAA,IAAOkD,WAAP;EAAA,IAAoBC,cAApB;;EAIA,kBAAwBnD,QAAQ,CAAC,EAAD,CAAhC;EAAA;EAAA,IAAOoD,IAAP;EAAA,IAAaC,OAAb;;EACA,kBAA0BrD,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAOsD,KAAP;EAAA,IAAcC,QAAd;;EAGA,kBAA4CvD,QAAQ,EAApD;EAAA;EAAA,IAAOwD,cAAP;EAAA,IAAuBC,iBAAvB;;EAGA,IAAMC,MAAM,GAAG5D,KAAK,CAAC6D,UAAN,CAAiBxD,WAAjB,EAA8BuD,MAA7C;EACA,IAAME,KAAK,GAAG9D,KAAK,CAAC6D,UAAN,CAAiBxD,WAAjB,EAA8ByD,KAA5C;EAGA,oBAAqE9C,KAAK,CAAC+C,MAA3E;EAAA,IAAQC,UAAR,iBAAQA,UAAR;EAAA,IAAoBC,MAApB,iBAAoBA,MAApB;EAAA,IAA4BC,MAA5B,iBAA4BA,MAA5B;EAAA,IAAoCC,WAApC,iBAAoCA,WAApC;EAAA,IAAiDC,OAAjD,iBAAiDA,OAAjD;EAAA,IAA0DC,MAA1D,iBAA0DA,MAA1D;EAGA,IAAMC,WAAW,GAAGtE,KAAK,CAAC6D,UAAN,CAAiBxD,WAAjB,EAA8BiE,WAAlD;EAGA,IAAMC,YAAY,GAAGvE,KAAK,CAAC6D,UAAN,CAAiBxD,WAAjB,EAA8BkE,YAAnD;;EAGA,SAASC,SAAT,QAAiCC,KAAjC,EAAwC;IAAA,IAApBxD,UAAoB,SAApBA,UAAoB;IACvCA,UAAU,CAACyD,QAAX,CAAoB,kBAApB,EAAwC;MACtCV,UAAU,EAAEA,UAD0B;MACdC,MAAM,EAAEA,MADM;MACEC,MAAM,EAAEA,MADV;MACkBO,KAAK,EAAEA;IADzB,CAAxC;EAGA;;EAGDxE,SAAS,CAAC,YAAM;IAEd,IAAM0E,WAAW,GAAG1D,UAAU,CAAC2D,WAAX,CAAuB,OAAvB,EAAgC,YAAM;MAC3DnD,UAAU,CAAC,IAAD,CAAV;MACAlB,OAAO,CAAC,KAAD,EAAQ,gBAAR,EAA0B;QAAC,gBAAeyD,UAAhB;QAA4B,YAAWC,MAAvC;QAA+C,UAASC;MAAxD,CAA1B,EAA2FJ,KAA3F,CAAP,CACCe,IADD,CACM,UAACC,IAAD,EAAW;QAACnD,OAAO,CAACmD,IAAD,CAAP;QAAerD,UAAU,CAAC,KAAD,CAAV;QAAmBI,WAAW,CAAC,IAAD,CAAX;MAAkB,CADtE,EAECkD,KAFD,CAEO,UAACC,KAAD,EAAW;QAACvD,UAAU,CAAC,KAAD,CAAV;QAAmBI,WAAW,CAAC,IAAD,CAAX;QAAmByC,WAAW,CAAEU,KAAF,CAAX;MAAoB,CAF7E;IAGE,CALmB,CAApB;IAQA,OAAOL,WAAP;EAED,CAZQ,EAYN,CAAC1D,UAAD,CAZM,CAAT;EAeAhB,SAAS,CAAC,YAAM;IACd,IAAG,CAAC2B,QAAJ,EAAa;MACdH,UAAU,CAAC,IAAD,CAAV;MAEAlB,OAAO,CAAC,KAAD,EAAQ,gBAAR,EAA0B;QAAC,gBAAeyD,UAAhB;QAA4B,YAAWC,MAAvC;QAA+C,UAASC;MAAxD,CAA1B,EAA0FJ,KAA1F,CAAP,CACIe,IADJ,CACS,UAACC,IAAD,EAAW;QAACnD,OAAO,CAACmD,IAAD,CAAP;QAAerD,UAAU,CAAC,KAAD,CAAV;QAAmBI,WAAW,CAAC,IAAD,CAAX;MAAmB,CAD1E,EAEIkD,KAFJ,CAEU,UAACC,KAAD,EAAW;QAACvD,UAAU,CAAC,KAAD,CAAV;QAAmBI,WAAW,CAAC,IAAD,CAAX;QAAmByC,WAAW,CAAEU,KAAF,CAAX;MAAoB,CAFhF;IAKE;EAEF,CAXQ,EAWN,CAACpD,QAAD,CAXM,CAAT;EAgBA3B,SAAS,CAAC,YAAM;IAIdoD,cAAc,CAAEjD,gBAAgB,CAAC8C,SAAD,EAAYxB,IAAZ,EAAkB,CAAlB,CAAlB,CAAd;EAED,CANQ,EAMN,CAACA,IAAD,EAAOwB,SAAP,CANM,CAAT;;EASA,IAAM+B,UAAU,GAAG,SAAbA,UAAa;IAAA,IAAGC,IAAH,SAAGA,IAAH;IAAA,OAEjB,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACvE,MAAM,CAACuE,IAAR,EAAcvE,MAAM,CAACuE,IAAI,CAACC,OAAN,CAApB,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAGE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAAEC,cAAc,EAAC,cAAjB;QAAiCC,aAAa,EAAE,QAAhD;QAA0DC,UAAU,EAAE,EAAtE;QAA0EC,WAAW,EAAE;MAAvF,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAOL,IAAI,CAACM,MAAZ,CADF,EAEE,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAON,IAAI,CAACO,GAAZ,CAFF,CAHF,EAQE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACJ,aAAa,EAAE,KAAhB;QAAuBK,YAAY,EAAE,IAArC;QAA2CN,cAAc,EAAE;MAA3D,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAEE,oBAAC,UAAD;MAAY,SAAS,EAAE;QAAA,OAAMO,aAAa,CAACjF,UAAU,CAACkF,GAAZ,EAAiBV,IAAI,CAACW,IAAtB,EAA4BX,IAAI,CAACY,UAAjC,EAA6C5B,MAA7C,EAAqDF,UAArD,EAAiEC,MAAjE,EAA0EiB,IAAI,CAACC,OAAL,IAAgB,UAAjB,GAA+B,GAA/B,GAAqC,GAA9G,CAAnB;MAAA,CAAvB;MACY,cAAc,EAAE,0BAAM;QAACpD,iCAAiC,CAAC,IAAD,CAAjC;QAAyCU,UAAU,CAACyC,IAAI,CAACa,WAAN,CAAV;QAA+BpD,cAAc,CAAC,CAAEuB,MAAF,EAAUF,UAAV,EAAsBC,MAAtB,EAA8BiB,IAAI,CAACY,UAAnC,CAAD,CAAd;MAAgE,CAD3K;MAEY,MAAM,EAAEZ,IAAI,CAACW,IAFzB;MAE+B,IAAI,EAAExB,MAFrC;MAE6C,KAAK,EAAC,KAFnD;MAEyD,GAAG,EAAET,MAF9D;MAEsE,GAAG,EAAEsB,IAAI,CAACY,UAFhF;MAE4F,WAAW,EAAIZ,IAAI,CAACa,WAFhH;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAFF,EAQE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACX,cAAc,EAAE,cAAjB;QAAiCY,WAAW,EAAE;MAA9C,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,SAAD;MAAW,OAAO,EAAE,mBAAM;QAACzC,OAAO,CAAC2B,IAAI,CAACe,KAAN,CAAP;QAAqBxC,QAAQ,CAACyB,IAAI,CAACgB,SAAN,CAAR;QAA0BvC,iBAAiB,CAACuB,IAAI,CAACY,UAAN,CAAjB;QAAoC3D,sBAAsB,CAAC,CAACD,mBAAF,CAAtB;MAA6C,CAA3J;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACG;MAAA,IAAGiE,OAAH,SAAGA,OAAH;MAAA,OACC,oBAAC,IAAD;QACE,IAAI,EAAC,MADP;QAEE,IAAI,EAAE,EAFR;QAGE,KAAK,EAAEA,OAAO,GAAC,eAAD,GAAiB,OAHjC;QAIE,KAAK,EAAExF,MAAM,CAACyF,UAJhB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADD;IAAA,CADH,CADF,CARF,CARF,CAFiB;EAAA,CAAnB;;EAqCA,IAAMT,aAAa,GAAG,SAAhBA,aAAgB,CAACU,GAAD,EAAMC,MAAN,EAAcC,QAAd,EAAwBC,IAAxB,EAA8BC,QAA9B,EAAwCC,IAAxC,EAA8CC,IAA9C,EAAuD;IAG3E,IAAGL,MAAM,IAAI,QAAb,EAAsB;MACpB/F,OAAO,CAAC,KAAD,EAAQ,iBAAR,EAA2B;QAAC,gBAAegG,QAAhB;QAA0B,kBAAiBC,IAA3C;QAAiD,gBAAeC,QAAhE;QAA0E,YAAWC;MAArF,CAA3B,EAAsH5C,KAAtH,CAAP,CACCe,IADD,CACM,UAAC+B,KAAD,EAAY;QAACC,cAAc,CAAC,qBAAD,EAAwB,SAAxB,CAAd;QAAkDhF,WAAW,CAAC,KAAD,CAAX;MAAmB,CADxF,EAECkD,KAFD,CAEO,UAACC,KAAD,EAAW;QAACnD,WAAW,CAAC,KAAD,CAAX;QAAoByC,WAAW,CAAEU,KAAF,CAAX;MAAoB,CAF3D;IAGD,CAJD,MAOK,IAAGsB,MAAM,IAAI,SAAb,EAAuB;MAE1B3D,cAAc,CAAC,CAAE6D,IAAF,EAAQC,QAAR,EAAkBC,IAAlB,EAAwBH,QAAxB,CAAD,CAAd;MAEAxE,iCAAiC,CAAC,IAAD,CAAjC;IAID,CARI,MAWD;MACLxB,OAAO,CAAC,KAAD,EAAQ,iBAAR,EAA2B;QAAC,gBAAegG,QAAhB;QAA0B,kBAAiBC,IAA3C;QAAiD,gBAAeC,QAAhE;QAA0E,YAAWC,IAArF;QAA2F,YAAWC;MAAtG,CAA3B,EAAuI7C,KAAvI,CAAP,CACCe,IADD,CACM,UAAC+B,KAAD,EAAY;QAACC,cAAc,CAAC,kBAAD,EAAqB,SAArB,CAAd;QAA+ChF,WAAW,CAAC,KAAD,CAAX;MAAmB,CADrF,EAECkD,KAFD,CAEO,UAACC,KAAD,EAAW;QAACnD,WAAW,CAAC,KAAD,CAAX;QAAoByC,WAAW,CAAEU,KAAF,CAAX;MAAoB,CAF3D;IAGE;EACF,CA1BD;;EA4BA,IAAM8B,kBAAkB,GAAG,SAArBA,kBAAqB,CAAEC,KAAF,EAAa;IACtC9D,uBAAuB,CAAE+D,oBAAoB,CAACD,KAAD,EAAQ/D,oBAAR,CAAtB,CAAvB;EACD,CAFD;;EAKA,IAAMiE,OAAO,GAAG,SAAVA,OAAU,GAAM;IAEpB,IAAIC,GAAG,GAAG,EAAV;;IACA,qDAAaxF,IAAb,wCAAkB;MAAA,IAAVyF,CAAU;;MAChB,IAAGA,CAAC,CAACrB,UAAF,IAAgBlC,MAAnB,EAA0B;QACxBsD,GAAG,CAACE,IAAJ,CAASD,CAAC,CAACrB,UAAX;MACD;IACF;;IAED,OAAOoB,GAAP;EACD,CAVD;;EAaA,IAAMG,MAAM,GAAG,SAATA,MAAS,GAAQ;IAErB,IAAIC,MAAM,GAAG,EAAb;;IACA,sDAAa5F,IAAb,2CAAkB;MAAA,IAAVyF,CAAU;MAChBG,MAAM,IAAIH,CAAC,CAACjB,SAAF,GAAc,GAAxB;IACD;;IACDoB,MAAM,GAAGA,MAAM,CAACC,KAAP,CAAa,CAAb,EAAgB,CAAC,CAAjB,CAAT;IAEA,IAAMC,GAAG,GAAIC,QAAQ,CAACC,EAAT,KAAgB,SAAjB,YACHJ,MADG,uCAEaA,MAFb,WAAZ;IAIFK,OAAO,CAACC,UAAR,CAAmBJ,GAAnB,EAAwB3C,IAAxB,CAA6B,UAACgD,SAAD,EAAe;MAC1C,IAAI,CAACA,SAAL,EAAgB;QACd,MAAM,oDAAN;MACD,CAFD,MAEO;QACLF,OAAO,CAACG,OAAR,CAAgBN,GAAhB;MACD;IACF,CAND,EAMGzC,KANH;EAOD,CAnBC;;EAsBA,IAAM8B,cAAc,GAAG,SAAjBA,cAAiB,CAACD,KAAD,EAAQmB,IAAR,EAAiB;IAEtC7G,KAAK,CAAC8G,IAAN,CAAWpB,KAAX,EAAkB;MACdmB,IAAI,EAAEA,IADQ;MAEdE,QAAQ,EAAE,QAFI;MAGdC,QAAQ,EAAE,IAHI;MAIdC,MAAM,EAAE,EAJM;MAKdC,aAAa,EAAE;IALD,CAAlB;EAOD,CATD;;EAWA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;IACnCpG,kCAAkC,CAAC,KAAD,CAAlC;;IACA,IAAGW,YAAY,IAAI,CAAnB,EAAqB;MACtBrC,OAAO,CAAC,KAAD,EAAQ,uBAAR,EAAiC;QAAC,gBAAeyD,UAAhB;QAA4B,YAAWC,MAAvC;QAA+C,UAASC,MAAxD;QAAgE,wBAAuBlB,oBAAvF;QAA6G,iBAAgBF;MAA7H,CAAjC,EAA+KgB,KAA/K,CAAP,CACCe,IADD,CACM;QAAA,OAAOhD,WAAW,CAAC,KAAD,CAAlB;MAAA,CADN,EAECkD,KAFD,CAEO,UAACC,KAAD,EAAW;QAACnD,WAAW,CAAC,KAAD,CAAX;QAAoByC,WAAW,CAAEU,KAAF,CAAX;MAAoB,CAF3D;IAGE,CAJD,MAKI;MACLzE,OAAO,CAAC,KAAD,EAAQ,uBAAR,EAAiC;QAAC,gBAAeyD,UAAhB;QAA4B,YAAWC,MAAvC;QAA+C,UAASC,MAAxD;QAAgE,wBAAuBlB,oBAAvF;QAA6G,iBAAgBF;MAA7H,CAAjC,EAA+KgB,KAA/K,CAAP,CACCe,IADD,CACM;QAAA,OAAMhD,WAAW,CAAC,KAAD,CAAjB;MAAA,CADN,EAECkD,KAFD,CAEO,UAACC,KAAD,EAAW;QAACnD,WAAW,CAAC,KAAD,CAAX;QAAoByC,WAAW,CAAEU,KAAF,CAAX;MAAoB,CAF3D;IAGE;EACF,CAZD;;EAcA,IAAMsD,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;IAClCvG,iCAAiC,CAAC,CAACD,8BAAF,CAAjC;IACAvB,OAAO,CAAC,KAAD,EAAQ,iBAAR,EAA2B;MAAC,gBAAemC,WAAW,CAAC,CAAD,CAA3B;MAAgC,kBAAiBA,WAAW,CAAC,CAAD,CAA5D;MAAiE,gBAAeA,WAAW,CAAC,CAAD,CAA3F;MAAgG,YAAWA,WAAW,CAAC,CAAD,CAAtH;MAA2H,iBAAgBF;IAA3I,CAA3B,EAA+KsB,KAA/K,CAAP,CACFe,IADE,CACG,UAACC,IAAD,EAAW;MAAC+B,cAAc,CAAC,iBAAD,EAAoB,QAApB,CAAd;MAA6ChF,WAAW,CAAC,KAAD,CAAX;MAAoBY,UAAU,CAAC,EAAD,CAAV;IAAe,CAD/F,EAEFsC,KAFE,CAEI,UAACC,KAAD,EAAW;MAACnD,WAAW,CAAC,KAAD,CAAX;MAAoBY,UAAU,CAAC,EAAD,CAAV;MAAgB6B,WAAW,CAAEU,KAAF,CAAX;IAAoB,CAFxE;EAID,CAND;;EASA,IAAMuD,eAAe,GAAG,SAAlBA,eAAkB,GAAM;IAC5B,IAAGrF,SAAS,IAAI,MAAhB,EAAuB;MACrBC,YAAY,CAAC,SAAD,CAAZ;MACAZ,QAAQ,CAAC,OAAD,CAAR;IACD,CAHD,MAIK,IAAGW,SAAS,IAAI,SAAhB,EAA0B;MAC7BC,YAAY,CAAC,QAAD,CAAZ;MACAZ,QAAQ,CAAC,GAAD,CAAR;IACD,CAHI,MAIA,IAAGW,SAAS,IAAI,QAAhB,EAAyB;MAC5BC,YAAY,CAAC,WAAD,CAAZ;MACAZ,QAAQ,CAAC,YAAD,CAAR;IACD,CAHI,MAID;MACFY,YAAY,CAAC,MAAD,CAAZ;MACAZ,QAAQ,CAAC,QAAD,CAAR;IACD;EAGF,CAnBD;;EAsBA,OACE,0CACE,oBAAC,YAAD;IAAc,KAAK,EAAE5B,MAAM,CAAC6H,SAA5B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,IAAD;IAAM,KAAK,EAAE;MAACC,IAAI,EAAE;IAAP,CAAb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACC,oBAAC,YAAD;IAAc,cAAc,EAAE/E,cAA9B;IAA8C,OAAO,EAAExB,mBAAvD;IAA4E,UAAU,EAAEC,sBAAxF;IAAgH,IAAI,EAAEmB,IAAtH;IAA4H,KAAK,EAAEE,KAAnI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADD,EAGE,oBAAC,KAAD;IACE,aAAa,EAAC,OADhB;IAEE,WAAW,EAAE,IAFf;IAGE,OAAO,EAAExB,+BAHX;IAIE,cAAc,EAAE,0BAAM;MAACC,kCAAkC,CAAC,KAAD,CAAlC;IAA0C,CAJnE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAME,oBAAC,UAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,IAAD;IAAM,KAAK,EAAEtB,MAAM,CAAC+H,YAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,eAAD;IAAiB,MAAM,EAAE5H,QAAzB;IAAmC,UAAU,EAAC,OAA9C;IAAsD,KAAK,EAAE,CAACH,MAAM,CAACgI,gBAAR,EAA0B;MAACC,KAAK,EAAE,GAAR;MAAaC,QAAQ,EAAE;IAAvB,CAA1B,CAA7D;IAAuH,UAAU,EAAElI,MAAM,CAACmI,iBAA1I;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,IAAD;IAAM,KAAK,EAAEnI,MAAM,CAACoI,iBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,oCADF,EAEE,oBAAC,SAAD;IACE,KAAK,EAAE,CAACpI,MAAM,CAACqI,KAAR,EAAe;MAACC,WAAW,EAAE,CAAd;MAAiBL,KAAK,EAAC;IAAvB,CAAf,CADT;IAEE,YAAY,EAAE9B,kBAFhB;IAGE,KAAK,EAAE9D,oBAHT;IAIE,YAAY,EAAC,SAJf;IAKE,SAAS,EAAE,EALb;IAME,eAAe,EAAE;MAAA,OAAM7B,QAAQ,CAAC+H,OAAT,CAAiBC,KAAjB,EAAN;IAAA,CANnB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,EAUE,oBAAC,IAAD;IAAM,KAAK,EAAExI,MAAM,CAACoI,iBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iCAVF,EAWE,oBAAC,SAAD;IACE,GAAG,EAAE5H,QADP;IAEE,SAAS,MAFX;IAGE,aAAa,EAAE,CAHjB;IAIE,KAAK,EAAE,CAACR,MAAM,CAACqI,KAAR,EAAe;MAACC,WAAW,EAAE,CAAd;MAAiBL,KAAK,EAAC,MAAvB;MAA+BQ,SAAS,EAAE;IAA1C,CAAf,CAJT;IAKE,YAAY,EAAErG,kBALhB;IAME,KAAK,EAAED,eANT;IAOE,OAAO,EAAE,iBAACuG,KAAD;MAAA,OAAWA,KAAK,CAACC,OAAN,IAAiB,EAAjB,IAAuBjI,SAAS,CAAC,KAAD,CAA3C;IAAA,CAPX;IAQE,UAAU,EAAE,oBAACkI,QAAD,EAAc;MAAG,CAACnI,MAAD,IAAWmI,QAAQ,CAACD,OAAT,IAAoB,EAAhC,IAAuCjB,sBAAsB,EAA7D;MACCkB,QAAQ,CAACD,OAAT,IAAoB,EAArB,IAA4BvG,kBAAkB,CAACD,eAAe,GAAG,IAAnB,CAA9C;MACAyG,QAAQ,CAACD,OAAT,IAAoB,EAApB,IAA0BjI,SAAS,CAAC,IAAD,CAAnC;IAA0C,CAVxE;IAWE,SAAS,EAAE,GAXb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAXF,EAwBE,oBAAC,IAAD;IAAM,KAAK,EAAEV,MAAM,CAAC6I,uBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,SAAD;IACE,KAAK,EAAE7I,MAAM,CAAC8I,MADhB;IAGE,OAAO,EAAE;MAAA,OAAMpB,sBAAsB,EAA5B;IAAA,CAHX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAKG;IAAA,IAAGlC,OAAH,SAAGA,OAAH;IAAA,OACC,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACxF,MAAM,CAAC+I,SAAR,EAAmB;QAACC,KAAK,EAACxD,OAAO,GAAC,WAAD,GAAa,OAA3B;QAAoCyD,UAAU,EAAE;MAAhD,CAAnB,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,aADD;EAAA,CALH,CADF,CAxBF,CADF,CADF,CANF,CAHF,EAoDA,oBAAC,KAAD;IACE,aAAa,EAAC,OADhB;IAEE,WAAW,EAAE,IAFf;IAGE,OAAO,EAAE9H,8BAHX;IAIE,cAAc,EAAE,0BAAM;MAACC,iCAAiC,CAAC,KAAD,CAAjC;MAA0CU,UAAU,CAAC,EAAD,CAAV;IAAe,CAJlF;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAME,oBAAC,UAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,IAAD;IAAM,KAAK,EAAE9B,MAAM,CAAC+H,YAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,eAAD;IAAiB,MAAM,EAAE5H,QAAzB;IAAmC,UAAU,EAAC,OAA9C;IAAsD,KAAK,EAAEH,MAAM,CAACgI,gBAApE;IAAsF,UAAU,EAAEhI,MAAM,CAACmI,iBAAzG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,IAAD;IAAM,KAAK,EAAEnI,MAAM,CAACoI,iBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,6BADF,EAEI,oBAAC,SAAD;IACE,SAAS,MADX;IAEE,aAAa,EAAE,CAFjB;IAGE,KAAK,EAAEvG,OAHT;IAIE,KAAK,EAAE,CAAC7B,MAAM,CAACqI,KAAR,EAAe;MAACC,WAAW,EAAE;IAAd,CAAf,CAJT;IAKE,YAAY,EAAExG,UALhB;IAME,WAAW,EAAC,yBANd;IAOE,gBAAgB,EAAC,KAPnB;IAQE,iBAAiB,EAAE,2BAACoH,KAAD;MAAA,OAAWtI,WAAW,CAACsI,KAAK,CAACC,WAAN,CAAkBC,SAAlB,CAA4BC,GAA7B,CAAtB;IAAA,CARrB;IASE,OAAO,EAAE,iBAACX,KAAD;MAAA,OAAWA,KAAK,CAACC,OAAN,IAAiB,EAAjB,IAAuBjI,SAAS,CAAC,KAAD,CAA3C;IAAA,CATX;IAUE,UAAU,EAAE,oBAACkI,QAAD,EAAc;MAAG,CAACnI,MAAD,IAAWmI,QAAQ,CAACD,OAAT,IAAoB,EAAhC,IAAuChB,qBAAqB,EAA5D;MACCiB,QAAQ,CAACD,OAAT,IAAoB,EAArB,IAA4B7G,UAAU,CAACD,OAAO,CAAC+E,KAAR,CAAc,CAAd,EAAiBjG,QAAjB,IAA6B,IAA7B,GAAoCkB,OAAO,CAAC+E,KAAR,CAAcjG,QAAd,CAArC,CAAtC;MACAiI,QAAQ,CAACD,OAAT,IAAoB,EAApB,IAA0BjI,SAAS,CAAC,IAAD,CAAnC;IAA0C,CAZxE;IAaE,SAAS,EAAE,GAbb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,EAkBE,oBAAC,IAAD;IAAM,KAAK,EAAEV,MAAM,CAACsJ,sBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,SAAD;IACE,KAAK,EAAE;MAACC,UAAU,EAAE,QAAb;MAAuBC,OAAO,EAAE,EAAhC;MAAoCC,SAAS,EAAE,CAA/C;MAAkDC,SAAS,EAAE;IAA7D,CADT;IAGE,OAAO,EAAE;MAAA,OAAM/B,qBAAqB,EAA3B;IAAA,CAHX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAKG;IAAA,IAAGnC,OAAH,SAAGA,OAAH;IAAA,OACC,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACxF,MAAM,CAAC2J,gBAAR,EAA0B;QAACX,KAAK,EAACxD,OAAO,GAAC,WAAD,GAAa,OAA3B;QAAoCoE,SAAS,EAAE,QAA/C;QAAyDX,UAAU,EAAE;MAArE,CAA1B,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,aADD;EAAA,CALH,CADF,EAWE,oBAAC,SAAD;IACE,KAAK,EAAE;MAACM,UAAU,EAAE,QAAb;MAAuBC,OAAO,EAAE,EAAhC;MAAoCC,SAAS,EAAE,CAA/C;MAAkDC,SAAS,EAAE;IAA7D,CADT;IAEE,OAAO,EAAE,mBAAM;MAACtI,iCAAiC,CAAC,CAACD,8BAAF,CAAjC;MACAW,UAAU,CAAC,EAAD,CAAV;IAAgB,CAHlC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAKG;IAAA,IAAG0D,OAAH,SAAGA,OAAH;IAAA,OACC,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACxF,MAAM,CAAC2J,gBAAR,EAA0B;QAACX,KAAK,EAACxD,OAAO,GAAC,WAAD,GAAa,OAA3B;QAAoCoE,SAAS,EAAE,QAA/C;QAAyDX,UAAU,EAAE;MAArE,CAA1B,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,aADD;EAAA,CALH,CAXF,CAlBF,CADF,CADF,CANF,CApDA,EAyGA,oBAAC,KAAD;IACE,aAAa,EAAC,OADhB;IAEE,WAAW,EAAE,IAFf;IAGE,OAAO,EAAExH,qBAHX;IAIE,cAAc,EAAE,0BAAM;MAACC,wBAAwB,CAAC,KAAD,CAAxB;IAAgC,CAJzD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAME,oBAAC,IAAD;IAAM,KAAK,EAAE1B,MAAM,CAAC+H,YAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,eAAD;IAAiB,MAAM,EAAE5H,QAAzB;IAAmC,UAAU,EAAC,OAA9C;IAAsD,KAAK,EAAEH,MAAM,CAACgI,gBAApE;IAAsF,UAAU,EAAEhI,MAAM,CAACmI,iBAAzG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,IAAD;IAAM,KAAK,EAAEnI,MAAM,CAACoI,iBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,+BADF,EAGE,oBAAC,IAAD;IAAM,KAAK,EAAE,CAACpI,MAAM,CAACsJ,sBAAR,EAAgC;MAACb,SAAS,EAAE;IAAZ,CAAhC,CAAb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,SAAD;IACE,KAAK,EAAE;MAACiB,SAAS,EAAE,QAAZ;MAAsBF,OAAO,EAAE;IAA/B,CADT;IAEE,OAAO,EAAE;MAAA,OAAM9H,wBAAwB,CAAC,KAAD,CAA9B;IAAA,CAFX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAIG;IAAA,IAAG8D,OAAH,SAAGA,OAAH;IAAA,OACC,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACwD,KAAK,EAACxD,OAAO,GAAC,WAAD,GAAa,OAA3B;QAAoCyD,UAAU,EAAE;MAAhD,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,aADF,CADD;EAAA,CAJH,CADF,EAWGnJ,MAAM,CAAC+J,KAAP,IAAgB,oBAAC,SAAD;IACf,KAAK,EAAE;MAACH,SAAS,EAAE,QAAZ;MAAsBF,OAAO,EAAE;IAA/B,CADQ;IAEf,OAAO,EAAE,mBAAM;MAAC9H,wBAAwB,CAAC,KAAD,CAAxB;MAAiCgF,MAAM;IAAG,CAF3C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAId;IAAA,IAAGlB,OAAH,SAAGA,OAAH;IAAA,OACC,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACxF,MAAM,CAAC2J,gBAAR,EAA0B;QAACX,KAAK,EAACxD,OAAO,GAAC,WAAD,GAAa,OAA3B;QAAoCyD,UAAU,EAAE;MAAhD,CAA1B,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,SADD;EAAA,CAJc,CAXnB,EAmBE,oBAAC,SAAD;IACE,KAAK,EAAE;MAACS,SAAS,EAAE,QAAZ;MAAsBF,OAAO,EAAE;IAA/B,CADT;IAEE,OAAO,EAAE,mBAAM;MAAC9H,wBAAwB,CAAC,KAAD,CAAxB;MAAiCkC,YAAY,CAAC0C,OAAO,EAAR,CAAZ;IAAwB,CAF3E;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAIG;IAAA,IAAGd,OAAH,UAAGA,OAAH;IAAA,OACC,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACxF,MAAM,CAAC2J,gBAAR,EAA0B;QAACX,KAAK,EAACxD,OAAO,GAAC,WAAD,GAAa,OAA3B;QAAoCyD,UAAU,EAAE;MAAhD,CAA1B,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,UADD;EAAA,CAJH,CAnBF,CAHF,CADF,CANF,CAzGA,EAqJA,oBAAC,QAAD;IACE,IAAI,EAAExG,WADR;IAEE,mBAAmB,EACjB,0CACE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACgC,cAAc,EAAC,YAAhB;QAA8B+E,OAAO,EAAE;MAAvC,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAEE,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACxJ,MAAM,CAACuE,IAAR,EAAcvE,MAAM,CAAC8F,QAArB,EAA+B;QAACrB,cAAc,EAAE,QAAjB;QAA2BqF,UAAU,EAAE;MAAvC,CAA/B,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,qBADF,EAEE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACb,UAAU,EAAE;MAAb,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAoCzF,WAApC,MAFF,EAGE,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,WAHF,EAIE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACyF,UAAU,EAAE;MAAb,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAoCxF,OAApC,MAJF,EAKE,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,SALF,EAME,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACwF,UAAU,EAAE;MAAb,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAoC1F,MAAM,CAACwG,KAAP,CAAa,GAAb,EAAkB,CAAlB,EAAqBA,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAApC,OACqCxG,MAAM,CAACwG,KAAP,CAAa,GAAb,EAAkB,CAAlB,EAAqBA,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CADrC,OAEqCxG,MAAM,CAACwG,KAAP,CAAa,GAAb,EAAkB,CAAlB,EAAqBA,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAFrC,MANF,CADF,CAFF,EAeE,oBAAC,IAAD;MAAM,KAAK,EAAE,CAAC/J,MAAM,CAACgK,KAAR,EAAehK,MAAM,CAACiK,OAAtB,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAfF,EAkBIvG,MAAM,IAAI,GAAX,IACC,oBAAC,IAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAEE,oBAAC,IAAD;MAAM,KAAK,EAAE,CAAC1D,MAAM,CAACuE,IAAR,EAAcvE,MAAM,CAAC8F,QAArB,EAA+B;QAACrB,cAAc,EAAE;MAAjB,CAA/B,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAEE,oBAAC,SAAD;MAAW,MAAM,EAAG,cAApB;MAAmC,OAAO,EAAE,mBAAO;QACjD7E,OAAO,CAAC,KAAD,EAAQ,uBAAR,EAAiC;UAAC,gBAAeyD,UAAhB;UAA4B,YAAWC,MAAvC;UAA+C,UAASC;QAAxD,CAAjC,EAAiGJ,KAAjG,CAAP,CACCe,IADD,CACM,UAACC,IAAD,EAAW;UAAC,IAAIA,IAAI,CAAC+F,MAAL,IAAe,CAAnB,EAAsB;YACtChI,eAAe,CAAC,CAAD,CAAf;YACAE,kBAAkB,CAAC+B,IAAI,CAAC,CAAD,CAAJ,CAAQiB,WAAT,CAAlB;YAAyC9C,uBAAuB,CAAC6B,IAAI,CAAC,CAAD,CAAJ,CAAQgG,mBAAR,IAA+B,GAAhC,CAAvB;YACzCrJ,UAAU,CAAC,KAAD,CAAV;YAAmBI,WAAW,CAAC,IAAD,CAAX;UAAmB,CAHtB,MAIZ;YACFgB,eAAe,CAAC,CAAD,CAAf;YACAE,kBAAkB,CAAC,EAAD,CAAlB;YAAwBE,uBAAuB,CAAC,GAAD,CAAvB;YACxBxB,UAAU,CAAC,KAAD,CAAV;YAAmBI,WAAW,CAAC,IAAD,CAAX;UACpB;QAAC,CATJ,EAUCkD,KAVD,CAUO,UAACC,KAAD,EAAW;UAACvD,UAAU,CAAC,KAAD,CAAV;UAAmBI,WAAW,CAAC,IAAD,CAAX;UAAmByC,WAAW,CAAEU,KAAF,CAAX;QAAoB,CAV7E;QAYA/C,kCAAkC,CAAC,IAAD,CAAlC;MAAyC,CAb3C;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAcK;MAAA,IAAGkE,OAAH,UAAGA,OAAH;MAAA,OACC,oBAAC,IAAD;QACE,IAAI,EAAC,oBADP;QAEE,IAAI,EAAE,EAFR;QAGE,KAAK,EAAEA,OAAO,GAAC,eAAD,GAAiB,OAHjC;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADD;IAAA,CAdL,CAFF,EAyBE,oBAAC,SAAD;MAAW,MAAM,EAAG,YAApB;MAAiC,OAAO,EAAE;QAAA,OAAM9D,wBAAwB,CAAC,IAAD,CAA9B;MAAA,CAA1C;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACG;MAAA,IAAG8D,OAAH,UAAGA,OAAH;MAAA,OACC,oBAAC,IAAD;QACE,IAAI,EAAC,WADP;QAEE,IAAI,EAAE,EAFR;QAGE,KAAK,EAAEA,OAAO,GAAC,eAAD,GAAiB,OAHjC;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADD;IAAA,CADH,CAzBF,EAmCE,oBAAC,SAAD;MAAW,MAAM,EAAG,eAApB;MAAoC,OAAO,EAAE;QAAA,OAAM3B,SAAS,CAAC;UAACvD,UAAU,EAAVA;QAAD,CAAD,EAAeS,IAAf,CAAf;MAAA,CAA7C;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACG;MAAA,IAAGyE,OAAH,UAAGA,OAAH;MAAA,OACC,oBAAC,IAAD;QACE,IAAI,EAAC,MADP;QAEE,IAAI,EAAE,EAFR;QAGE,KAAK,EAAEA,OAAO,GAAC,eAAD,GAAiB,OAHjC;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADD;IAAA,CADH,CAnCF,EA6CE,oBAAC,SAAD;MAAW,MAAM,EAAG,iBAApB;MAAsC,OAAO,EAAE;QAAA,OAAMoC,eAAe,EAArB;MAAA,CAA/C;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACG;MAAA,IAAGpC,OAAH,UAAGA,OAAH;MAAA,OACC,oBAAC,IAAD;QACE,IAAI,EAAE7D,KADR;QAEE,IAAI,EAAE,EAFR;QAGE,KAAK,EAAE6D,OAAO,GAAC,eAAD,GAAiB,OAHjC;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADD;IAAA,CADH,CA7CF,CAFF,EA0DE,oBAAC,IAAD;MAAM,KAAK,EAAE,CAACxF,MAAM,CAACgK,KAAR,EAAehK,MAAM,CAACiK,OAAtB,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EA1DF,CAnBJ,CADF,EAmIE,oBAAC,IAAD;MAAM,KAAK,EAAI,CAACjK,MAAM,CAACoK,MAAR,EAAe;QAACrF,YAAY,EAAE;MAAf,CAAf,CAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACkD,KAAK,EAAC;MAAP,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,IAAD;MAAM,KAAK,EAAI,CAACjI,MAAM,CAACqK,WAAR,EAAqB;QAACT,SAAS,EAAE,MAAZ;QAAqBjF,UAAU,EAAE;MAAjC,CAArB,CAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,mBADF,CADF,EAIE,oBAAC,IAAD;MAAM,KAAK,EAAE;QAACsD,KAAK,EAAC,KAAP;QAAcxD,cAAc,EAAE;MAA9B,CAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACE,oBAAC,IAAD;MAAM,KAAK,EAAI,CAACzE,MAAM,CAACqK,WAAR,EAAqB;QAACT,SAAS,EAAE,OAAZ;QAAqB7E,YAAY,EAAE;MAAnC,CAArB,CAAf;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,2BADF,CAJF,CAnIF,CAHJ;IAgJE,UAAU,EAAET,UAhJd;IAiJE,YAAY,EAAE,sBAACC,IAAD,EAAO+F,KAAP;MAAA,OAAiBA,KAAK,CAACC,QAAN,EAAjB;IAAA,CAjJhB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EArJA,CADF,EA0SF1J,SAAS,IACL,oBAAC,IAAD;IAAM,KAAK,EAAEb,MAAM,CAACwK,OAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,iBAAD;IAAmB,IAAI,EAAC,OAAxB;IAAgC,KAAK,EAAC,SAAtC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,CA3SF,CADF,CADF;AAoTD;;AAID,IAAMnE,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACD,KAAD,EAAQqE,aAAR,EAA0B;EAErD,IAAI,CAACrE,KAAD,IAAUA,KAAK,IAAI,CAAvB,EAA2B,OAAO,GAAP;EAC3B,IAAMsE,YAAY,GAAGtE,KAAK,CAACuE,OAAN,CAAc,QAAd,EAAwB,EAAxB,EAA4BA,OAA5B,CAAoC,MAApC,EAA4C,EAA5C,CAArB;;EAEA,IAAID,YAAY,CAACR,MAAb,KAAwB,CAA5B,EAA+B;IAC7B,OAAO,GAAP;EACD,CAFD,MAGK;IACH,OAAOQ,YAAP;EACD;AAEF,CAZD;;AAeA,eAAetK,cAAf;AACA,SAAQiG,oBAAR"},"metadata":{},"sourceType":"module"}