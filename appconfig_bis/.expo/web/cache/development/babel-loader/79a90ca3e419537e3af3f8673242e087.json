{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/vats/Resto_config_2022/appconfig_bis/src/screens/Informations/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { userContext } from \"../../contexts/userContext\";\nimport { sendAPI } from \"../../components/sendAPI\";\nimport styles from \"../../styles\";\n\nfunction informationScreen(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      visibleData = _useState4[0],\n      setVisibleData = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  var userID = React.useContext(userContext).userID;\n  var token = React.useContext(userContext).token;\n  var handleError = React.useContext(userContext).handleError;\n  useEffect(function () {\n    setLoading(true);\n    sendAPI('APP', 'AP_LST_INFO', {\n      'P_IDBENEVOLE': userID\n    }, token).then(function (json) {\n      setData(json);\n      setLoading(false);\n    }).catch(function (error) {\n      setLoading(false);\n      handleError(error);\n    });\n  }, []);\n  useEffect(function () {\n    setVisibleData(data);\n  }, [data]);\n\n  var renderItem = function renderItem(_ref2) {\n    var item = _ref2.item;\n    return React.createElement(Pressable, {\n      onPress: function onPress() {\n        return handleClick(item.lien);\n      },\n      style: [{\n        justifyContent: \"center\"\n      }, styles.item, item.idrole == 2 ? styles.REFERENT : item.idrole == 0 ? styles.GENERAL : styles.BENEVOLE],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }\n    }, function (_ref3) {\n      var pressed = _ref3.pressed;\n      return React.createElement(Text, {\n        style: {\n          color: pressed ? \"white\" : \"black\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }\n      }, item.commentaire);\n    });\n  };\n\n  var handleClick = function handleClick(url) {\n    Linking.canOpenURL(url).then(function (supported) {\n      if (supported) {\n        Linking.openURL(url);\n      } else {}\n    });\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, isLoading ? React.createElement(View, {\n    style: styles.loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#e92682\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  })) : React.createElement(React.Fragment, null, React.createElement(View, {\n    style: {\n      flex: 1,\n      alignSelf: \"center\",\n      width: \"100%\",\n      maxWidth: 550,\n      paddingTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    data: visibleData,\n    renderItem: renderItem,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  })))));\n}\n\nexport default informationScreen;","map":{"version":3,"names":["React","useEffect","useState","userContext","sendAPI","styles","informationScreen","navigation","isLoading","setLoading","visibleData","setVisibleData","data","setData","userID","useContext","token","handleError","then","json","catch","error","renderItem","item","handleClick","lien","justifyContent","idrole","REFERENT","GENERAL","BENEVOLE","pressed","color","commentaire","url","Linking","canOpenURL","supported","openURL","container","loading","flex","alignSelf","width","maxWidth","paddingTop","index","toString"],"sources":["/home/vats/Resto_config_2022/appconfig_bis/src/screens/Informations/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { ActivityIndicator, FlatList, Text, View} from 'react-native';\r\nimport {SafeAreaView, Pressable} from 'react-native';\r\nimport {Linking} from 'react-native';\r\n\r\nimport {userContext} from '../../contexts/userContext';\r\nimport {sendAPI} from '../../components/sendAPI';\r\nimport styles from '../../styles';\r\n\r\n// Fonction Principale\r\nfunction informationScreen({navigation}) {\r\n  // on définit les états : data et loading\r\n  const [isLoading, setLoading] = useState(true);\r\n  const [visibleData, setVisibleData] = useState(\"\");\r\n  const [data, setData] = useState([]);\r\n  \r\n  //récupération de l'id de l'utilisateur courrant\r\n  const userID = React.useContext(userContext).userID;\r\n  const token = React.useContext(userContext).token;\r\n  \r\n  //Handler des erreurs de serveur\r\n  const handleError = React.useContext(userContext).handleError;\r\n\r\n  // on va chercher les informations sur la BDD\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    sendAPI('APP', 'AP_LST_INFO', {'P_IDBENEVOLE':userID},token)\r\n      .then((json) =>  {setData(json); setLoading(false)})\r\n      .catch((error) => {setLoading(false); handleError (error)});\r\n  }, []);\r\n\r\n\r\n  // on met à jour la liste visible initiale\r\n  useEffect(() => {\r\n        setVisibleData( (data) );\r\n\r\n  }, [data]);\r\n\r\n  \r\n\r\n  // On crée le renderer pour la flatlist\r\n  const renderItem = ({ item }) => (\r\n    // Conteneur Principal\r\n    \r\n        <Pressable onPress={() => handleClick(item.lien)} style={[{justifyContent: \"center\"}, styles.item, (item.idrole==2)?styles.REFERENT:(item.idrole==0)?styles.GENERAL:styles.BENEVOLE]}>\r\n          {({ pressed }) => (\r\n            <Text style={{color: pressed?\"white\":\"black\"}}>{item.commentaire}</Text>\r\n          )}\r\n        </Pressable>\r\n    \r\n  );\r\n\r\n\r\n\r\n  const handleClick = (url) => {\r\n    Linking.canOpenURL(url).then(supported => {\r\n      if (supported) {\r\n        Linking.openURL(url);\r\n      } else {\r\n        //TODO erreur\r\n      }\r\n    });\r\n  };\r\n\r\n\r\n  // on retourne la flatliste\r\n  return (\r\n    <>\r\n    <SafeAreaView style={styles.container}>\r\n      {isLoading ? (\r\n          <View style={styles.loading}>\r\n            <ActivityIndicator size=\"large\" color=\"#e92682\" />\r\n          </View>) : (\r\n      <>\r\n\r\n        <View style={{flex: 1, alignSelf: \"center\", width: \"100%\", maxWidth: 550, paddingTop: 20}}>\r\n            <FlatList\r\n                data={visibleData}\r\n                renderItem={renderItem}\r\n                keyExtractor={(item, index) => (index.toString())}\r\n                //ListHeaderComponent={}\r\n            />\r\n        </View>\r\n\r\n      </>\r\n      )}\r\n    </SafeAreaView>\r\n\t</>\r\n  );\r\n\r\n}\r\n\r\n// On exporte la fonction principale\r\nexport default informationScreen;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}