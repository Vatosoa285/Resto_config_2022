{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vats/Resto_config_2022/appconfig_bis/src/screens/Compte/index.js\";\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { normalizeInputPhone } from \"../../components/normalizeInputPhone\";\nimport { modeAffichage } from \"../../components/modeAffichage\";\nimport { sendAPI } from \"../../components/sendAPI\";\nimport { userContext } from \"../../contexts/userContext\";\nimport { useToast } from \"react-native-toast-notifications\";\nimport * as Device from 'expo-device';\nimport styles from \"../../styles\";\n\nvar compteScreen = function compteScreen() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var toast = useToast();\n  var refEmail = useRef(null);\n  var refNewP = useRef(null);\n  var refVerifP = useRef(null);\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dataEngagementDefaut = _useState4[0],\n      setDataEngagementDefaut = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dataPerso = _useState6[0],\n      setDataPerso = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      phone = _useState8[0],\n      setPhone = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      mail = _useState10[0],\n      setMail = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      oldP = _useState12[0],\n      setOldP = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      newP = _useState14[0],\n      setNewP = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      verifP = _useState16[0],\n      setVerifP = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      persoUpToDate = _useState18[0],\n      setPersoUpToDate = _useState18[1];\n\n  var userID = React.useContext(userContext).userID;\n  var token = React.useContext(userContext).token;\n\n  var _useState19 = useState({\n    \"jourdefaut\": \"\\u25B2\",\n    \"nomactivite\": \"\",\n    \"nomsite\": \"\"\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      header = _useState20[0],\n      setHeader = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      visibleData = _useState22[0],\n      setVisibleData = _useState22[1];\n\n  var _useState23 = useState(\"jourdefaut\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      ancienMode = _useState24[0],\n      setAncienMode = _useState24[1];\n\n  var handleError = React.useContext(userContext).handleError;\n  var fctModalApp = React.useContext(userContext).fctModalApp;\n  useEffect(function () {\n    sendAPI('APP', 'AP_LST_ENG_BEN', {\n      'P_IDBENEVOLE': userID\n    }, token).then(function (json) {\n      return setDataEngagementDefaut(json);\n    }).catch(function (error) {\n      return handleError(error);\n    });\n  }, []);\n  useEffect(function () {\n    if (persoUpToDate === false) {\n      setPersoUpToDate(true);\n      sendAPI('APP', 'AP_MON_COMPTE', {\n        'P_IDBENEVOLE': userID\n      }, token).then(function (json) {\n        setDataPerso(json[0]);\n        setLoading(false);\n      }).catch(function (error) {\n        setLoading(false);\n        handleError(error);\n      });\n    }\n  }, [persoUpToDate]);\n  useEffect(function () {\n    setVisibleData(dataEngagementDefaut);\n  }, [dataEngagementDefaut]);\n\n  var renderItem = function renderItem(_ref) {\n    var item = _ref.item;\n    return React.createElement(View, {\n      style: [styles.item, styles[item.nomrole]],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }\n    }, React.createElement(View, {\n      style: {\n        width: '33%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, item.jourdefaut)), React.createElement(View, {\n      style: {\n        width: '33%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, item.nomactivite)), React.createElement(View, {\n      style: {\n        width: '33%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, item.nomsite)));\n  };\n\n  var handleChangePhone = function handleChangePhone(value) {\n    setPhone(normalizeInputPhone(value));\n  };\n\n  var toastComponent = function toastComponent(texte, type) {\n    toast.show(texte, {\n      type: type,\n      position: \"bottom\",\n      duration: 2000,\n      offset: 30,\n      animationType: \"zoom-in\"\n    });\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, isLoading ? React.createElement(View, {\n    style: styles.loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#e92682\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 10\n    }\n  })) : React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, React.createElement(FlatList, {\n    data: visibleData,\n    ListHeaderComponent: React.createElement(React.Fragment, null, React.createElement(View, {\n      style: {\n        marginTop: 10\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    }, React.createElement(View, {\n      style: [styles.browser],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, \"Profil de \"), React.createElement(Text, {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, dataPerso.prenom, \" \", dataPerso.nom)), React.createElement(View, {\n      style: styles.ligne,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    })), React.createElement(View, {\n      style: [styles.browser, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: styles.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 23\n      }\n    }, \"Modification des coordonn\\xE9es :\"), React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.data,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, \"T\\xE9l\\xE9phone : \"), React.createElement(TextInput, {\n      style: styles.input,\n      placeholder: normalizeInputPhone(dataPerso.telephone),\n      autoCorrect: false,\n      textContentType: \"telephoneNumber\",\n      keyboardType: \"phone-pad\",\n      onChangeText: handleChangePhone,\n      blurOnSubmit: false,\n      onSubmitEditing: function onSubmitEditing() {\n        return refEmail.current.focus();\n      },\n      value: phone,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.data,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, \"Email : \"), React.createElement(TextInput, {\n      ref: refEmail,\n      style: [styles.input, {\n        width: \"75%\",\n        maxWidth: 400,\n        marginBottom: 5\n      }],\n      placeholder: dataPerso.email,\n      autoCorrect: false,\n      textContentType: \"emailAddress\",\n      keyboardType: \"email-address\",\n      onChangeText: function onChangeText(text) {\n        return setMail(text);\n      },\n      value: mail,\n      onSubmitEditing: function onSubmitEditing() {\n        return changeContact(phone, mail);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    })), React.createElement(Button, {\n      onPress: function onPress() {\n        return changeContact(phone, mail);\n      },\n      title: \"Valider Coordonn\\xE9es\",\n      color: \"#841584\",\n      accessibilityLabel: \"Valider vos nouvelles informations de contact\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 23\n      }\n    })), React.createElement(View, {\n      style: [styles.browser, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: styles.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, \"Modification du mot de passe :\"), React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.data,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, \"Ancien mot de passe : \"), React.createElement(TextInput, {\n      style: styles.input,\n      placeholder: \"******\",\n      autoCorrect: false,\n      secureTextEntry: true,\n      textContentType: \"password\",\n      onChangeText: function onChangeText(text) {\n        return setOldP(text);\n      },\n      value: oldP,\n      onSubmitEditing: function onSubmitEditing() {\n        return refNewP.current.focus();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.data,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }, \"Nouveau mot de passe : \"), React.createElement(TextInput, {\n      ref: refNewP,\n      style: styles.input,\n      placeholder: \"******\",\n      autoCorrect: false,\n      secureTextEntry: true,\n      textContentType: \"newPassword\",\n      onChangeText: function onChangeText(text) {\n        return setNewP(text);\n      },\n      value: newP,\n      onSubmitEditing: function onSubmitEditing() {\n        return refVerifP.current.focus();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.data,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 25\n      }\n    }, \"Confirmation mot de passe : \"), React.createElement(TextInput, {\n      ref: refVerifP,\n      style: [styles.input, {\n        marginBottom: 5\n      }],\n      placeholder: \"******\",\n      autoCorrect: false,\n      secureTextEntry: true,\n      textContentType: \"newPassword\",\n      onChangeText: function onChangeText(text) {\n        return setVerifP(text);\n      },\n      value: verifP,\n      onSubmitEditing: function onSubmitEditing() {\n        return changeMdP(oldP, newP, verifP);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 25\n      }\n    })), React.createElement(Button, {\n      onPress: function onPress() {\n        changeMdP(oldP, newP, verifP);\n      },\n      title: \"Valider Mot de Passe\",\n      color: \"#841584\",\n      accessibilityLabel: \"Valider votre nouveau mot de passe\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 23\n      }\n    })), React.createElement(View, {\n      style: styles.header,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }\n    }, React.createElement(Pressable, {\n      style: {\n        width: '33%'\n      },\n      onPress: function onPress() {\n        return modeAffichage(dataEngagementDefaut, visibleData, setVisibleData, setAncienMode, ancienMode, \"jourdefaut\", header, setHeader);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.headerTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 25\n      }\n    }, \"Jour \", header.jourdefaut)), React.createElement(Pressable, {\n      style: {\n        width: '33%'\n      },\n      onPress: function onPress() {\n        return modeAffichage(dataEngagementDefaut, visibleData, setVisibleData, setAncienMode, ancienMode, \"nomactivite\", header, setHeader);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.headerTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 25\n      }\n    }, \"Activit\\xE9 \", header.nomactivite)), React.createElement(Pressable, {\n      style: {\n        width: '33%'\n      },\n      onPress: function onPress() {\n        return modeAffichage(dataEngagementDefaut, visibleData, setVisibleData, setAncienMode, ancienMode, \"nomsite\", header, setHeader);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.headerTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 25\n      }\n    }, \"Site \", header.nomsite))))),\n    renderItem: renderItem,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }))));\n\n  function changeMdP(oldP, newP, verifP) {\n    if (oldP == \"\" || newP == \"\" || verifP == \"\") {\n      Device.brand ? toastComponent(\"Au moins un des champs est vide\", \"warning\") : fctModalApp(\"Attention\", \"Au moins un des champs est vide\");\n    } else if (newP != verifP) {\n      Device.brand ? toastComponent(\"Les champs correspondant au nouveau mot de passe ne sont pas identiques\", \"danger\") : fctModalApp(\"Attention\", \"Les champs du nouveau mot de passe ne concordent pas\");\n    } else if (newP.length < 8) {\n      Device.brand ? toastComponent(\"Votre mot de passe doit contenir au moins 8 caractères\", \"danger\") : fctModalApp(\"Mot de passe trop court\", \"Le mot de passe doit contenir au moins 8 caractères\");\n    } else {\n      setLoading(true);\n      sendAPI('AUT', 'AP_UPD_MOTDEPASSE', {\n        'ancienMDP': oldP,\n        'nouveauMDP': newP,\n        'idBenevole': userID\n      }).then(function (json) {\n        Device.brand ? toastComponent(\"Votre mot de passe a bien été modifié.\", \"success\") : fctModalApp(\"succès\", \"Votre mot de passe a bien été modifié\");\n        setLoading(false);\n      }).catch(function (error) {\n        setLoading(false);\n        handleError(error);\n      });\n    }\n\n    setOldP(\"\");\n    setNewP(\"\");\n    setVerifP(\"\");\n  }\n\n  function changeContact(phone, mail) {\n    phone = phone.replace(/[^\\d+]/g, '');\n    var regexMail = /^(?:[a-zA-Z0-9!#$%&'*+/=?^_‘{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_‘{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/;\n    var regexPhone = /^(([0-9]{10})|(\\+33[0-9]{9}))$/;\n\n    if (phone == \"\") {\n      phone = dataPerso.telephone;\n    }\n\n    if (mail == \"\") {\n      mail = dataPerso.email;\n    }\n\n    if (!regexMail.test(mail)) {\n      mail = dataPerso.email;\n      Device.brand ? toastComponent(\"Email non valide\", \"error\") : fctModalApp(\"Attention\", \"Email non valide\");\n    }\n\n    if (!regexPhone.test(phone)) {\n      phone = dataPerso.telephone;\n      Device.brand ? toastComponent(\"Numéro de téléphone non valide\", \"error\") : fctModalApp(\"Attention\", \"Numéro de téléphone non valide\");\n    }\n\n    if (phone != dataPerso.telephone || mail != dataPerso.email) {\n      sendAPI('APP', 'AP_UPD_INFO_BENEVOLE', {\n        'P_TOKEN': token,\n        'P_EMAIL': mail,\n        'P_TELEPHONE': phone\n      }, token).then(function (texte) {\n        if (texte != \"1\") {\n          throw \"Erreur lors de la mise à jour de la base de données\";\n        }\n\n        setPhone(\"\");\n        setMail(\"\");\n        setPersoUpToDate(false);\n        setLoading(false);\n      }).catch(function (error) {\n        setPhone(\"\");\n        setMail(\"\");\n        setPersoUpToDate(false);\n        setLoading(false);\n        handleError(error);\n      });\n      Device.brand ? toastComponent(\"Vos informations ont bien été mises à jour.\", \"success\") : fctModalApp(\"succès\", \"Vos informations ont bien été mise à jour\");\n    }\n\n    setPhone(\"\");\n    setMail(\"\");\n  }\n};\n\nexport default compteScreen;","map":{"version":3,"names":["React","useEffect","useState","useRef","normalizeInputPhone","modeAffichage","sendAPI","userContext","useToast","Device","styles","compteScreen","isLoading","setLoading","toast","refEmail","refNewP","refVerifP","dataEngagementDefaut","setDataEngagementDefaut","dataPerso","setDataPerso","phone","setPhone","mail","setMail","oldP","setOldP","newP","setNewP","verifP","setVerifP","persoUpToDate","setPersoUpToDate","userID","useContext","token","header","setHeader","visibleData","setVisibleData","ancienMode","setAncienMode","handleError","fctModalApp","then","json","catch","error","renderItem","item","nomrole","width","textAlign","jourdefaut","nomactivite","nomsite","handleChangePhone","value","toastComponent","texte","type","show","position","duration","offset","animationType","container","loading","flex","marginTop","browser","fontWeight","prenom","nom","ligne","marginBottom","title","flexDirection","data","input","telephone","current","focus","maxWidth","email","text","changeContact","changeMdP","headerTitle","index","toString","brand","length","replace","regexMail","regexPhone","test"],"sources":["/home/vats/Resto_config_2022/appconfig_bis/src/screens/Compte/index.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { ActivityIndicator, FlatList, Text, View, Button} from 'react-native';\nimport {SafeAreaView, Pressable, TextInput} from 'react-native';\n\nimport {normalizeInputPhone} from '../../components/normalizeInputPhone';\nimport {modeAffichage} from '../../components/modeAffichage';\nimport {sendAPI} from '../../components/sendAPI';\nimport {userContext} from '../../contexts/userContext';\n\nimport { useToast } from \"react-native-toast-notifications\";\nimport * as Device from 'expo-device';\n\nimport styles from '../../styles';\n\n\n// Fonction Principale\nconst compteScreen = () => {\n  const [isLoading, setLoading] = useState(true);\n\n  // Toast\n  const toast = useToast();\n\n  const refEmail = useRef(null);\n  const refNewP = useRef(null);\n  const refVerifP = useRef(null);\n\n  // Info perso et Info Engagement\n  const [dataEngagementDefaut, setDataEngagementDefaut] = useState([]);\n  const [dataPerso, setDataPerso] = useState([]);\n\n  // Champs remplissable\n  const [phone, setPhone] = useState('');\n  const [mail, setMail] = useState('');\n  const [oldP, setOldP] = useState('');\n  const [newP, setNewP] = useState('');\n  const [verifP, setVerifP] = useState('');\n  const [persoUpToDate, setPersoUpToDate] = useState(false);\n  \n  // On récupère l'id de l'utilisateur courrant\n  const userID = React.useContext(userContext).userID\n  const token = React.useContext(userContext).token\n\n  // Mode d'affichage\n  const [header, setHeader] = useState({\n                                        \"jourdefaut\": \"\\u25B2\",\n                                        \"nomactivite\": \"\",\n                                        \"nomsite\": \"\",\n                                      });\n  const [visibleData, setVisibleData] = useState('');\n  const [ancienMode, setAncienMode] = useState(\"jourdefaut\");\n  \n  //Handler des erreurs de serveur\n  const handleError = React.useContext(userContext).handleError;\n  \n\n  // On récupère la fonction pour gérer le modal d'informations\n  const fctModalApp = React.useContext(userContext).fctModalApp;\n  \n  // On récupère les informations d'engagement par défaut\n  useEffect(() => {\n\tsendAPI('APP', 'AP_LST_ENG_BEN',{'P_IDBENEVOLE':userID},token)\n\t.then((json) =>  setDataEngagementDefaut(json))\n\t.catch((error) => handleError (error))\n  }, []);\n\n  // On récupère les informations personelles\n  useEffect(() => {\n    if (persoUpToDate === false) {\n      setPersoUpToDate(true);\n\t  sendAPI('APP', 'AP_MON_COMPTE',{'P_IDBENEVOLE':userID},token)\n\t  .then((json) =>  {setDataPerso(json[0]); setLoading(false)})\n\t  .catch((error) => {setLoading(false); handleError (error)});\n\t  }\n  }, [persoUpToDate]);\n\n\n  // on met à jour la liste visible initiale\n  useEffect(() => {\n    setVisibleData(dataEngagementDefaut);\n  }, [dataEngagementDefaut]);\n\n  // On crée le renderer pour la liste des engagements par défaut\n  const renderItem = ({ item }) => (\n    <View style={[styles.item, styles[item.nomrole] ]}>\n      <View style={{width:'33%'}}>\n        <Text style= {{textAlign: \"center\"}}>{item.jourdefaut}</Text>\n      </View>\n      <View style={{width:'33%'}}>\n        <Text style= {{textAlign: \"center\"}}>{item.nomactivite}</Text>\n      </View>\n      <View style={{width:'33%'}}>\n        <Text style= {{textAlign: \"center\"}}>{item.nomsite}</Text>\n      </View>\n    </View>\n  );\n\n  // handler phone change\n  const handleChangePhone = ( value ) => { \n    setPhone( normalizeInputPhone(value) );\n  };\n\n  // Affiche le toast\n  const toastComponent = (texte, type) => {\n        \n    toast.show(texte, {\n        type: type,\n        position: \"bottom\",\n        duration: 2000,\n        offset: 30,\n        animationType: \"zoom-in\",\n      });\n  };\n\n\n  // On retourne la flatliste\n  return (\n    <SafeAreaView style={styles.container}>\n      {isLoading ? (\n        <View style={styles.loading}>\n         <ActivityIndicator size=\"large\" color=\"#e92682\" />\n\t      </View>) : (\n        //View Principal, post chargement\n        <View style={{flex: 1}}>\n\n          {/* La vue des infos profil (au dessus des activités) se trouve dans le header de la flatlist */}\n\n          {/* View des Activités */}\n          <View>\n            <FlatList\n              data={visibleData}\n              ListHeaderComponent={\n                <>\n                  {/* View du Profil (info, contact, MdP) */}\n                  <View style={{marginTop: 10}}>\n                    {/* View des information de profil */}\n                    <View style={[styles.browser]}>\n                      \n                      <Text style={{textAlign: \"center\"}}>\n                        <Text>Profil de </Text>\n                        <Text style={{fontWeight: \"bold\"}}>{dataPerso.prenom} {dataPerso.nom}</Text>\n                      </Text>\n                      <View style={styles.ligne}/>\n                    </View>\n\n                    {/* View des informations de contact */}\n                    <View style={[styles.browser, {marginBottom: 10}]}>\n                      <Text style={styles.title}>Modification des coordonnées :</Text>\n                      <View style={{ flexDirection: \"row\"}}>\n                        <Text style={styles.data}>Téléphone : </Text>\n                        <TextInput\n                          style={styles.input}\n                          placeholder={normalizeInputPhone(dataPerso.telephone)}\n                          autoCorrect={false}\n                          textContentType='telephoneNumber'\n                          keyboardType='phone-pad'\n                          onChangeText={handleChangePhone}\n                          blurOnSubmit={false}\n                          onSubmitEditing={() => refEmail.current.focus()}\n\t\t\t\t\t\t              value = {phone}\n                        />\n                      </View>\n                      <View style={{ flexDirection: \"row\"}}>\n                        <Text style={styles.data}>Email : </Text>\n                        <TextInput\n                          ref={refEmail}\n                          style={[styles.input, {width: \"75%\", maxWidth: 400, marginBottom: 5}]}\n                          placeholder={dataPerso.email}\n                          autoCorrect={false}\n                          textContentType='emailAddress'\n                          keyboardType='email-address'\n                          onChangeText={text => setMail(text)}\n\t\t\t\t\t\t              value = {mail}\n                          onSubmitEditing={() => changeContact(phone, mail)}\n                        />\n                      </View>\n                      <Button\n                        onPress={() => changeContact(phone, mail)}\n                        title=\"Valider Coordonnées\"\n                        color=\"#841584\"\n                        accessibilityLabel=\"Valider vos nouvelles informations de contact\"\n                      />\n                    </View>\n\n                    {/* View des MdP */}\n                    <View style={[styles.browser, {marginBottom: 10}]}>\n                      <Text style={styles.title}>Modification du mot de passe :</Text>\n                      <View style={{ flexDirection: \"row\"}}>\n                        <Text style={styles.data}>Ancien mot de passe : </Text>\n                        <TextInput\n                          style={styles.input}\n                          placeholder=\"******\"\n                          autoCorrect={false}\n                          secureTextEntry={true}\n                          textContentType='password'\n                          onChangeText={text => setOldP(text)}\n\t\t\t\t\t\t              value = {oldP}\n                          onSubmitEditing={() => refNewP.current.focus()}\n                        />\n                      </View>\n                      <View style={{ flexDirection: \"row\"}}>\n                        <Text style={styles.data}>Nouveau mot de passe : </Text>\n                        <TextInput\n                          ref={refNewP}\n                          style={styles.input}\n                          placeholder=\"******\"\n                          autoCorrect={false}\n                          secureTextEntry={true}\n                          textContentType='newPassword'\n                          onChangeText={text => setNewP(text)}\n\t\t\t\t\t\t              value = {newP}\n                          onSubmitEditing={() => refVerifP.current.focus()}\n                        />\n                      </View>\n                      <View style={{ flexDirection: \"row\"}}>\n                        <Text style={styles.data}>Confirmation mot de passe : </Text>\n                        <TextInput\n                          ref={refVerifP}\n                          style={[styles.input, {marginBottom: 5}]}\n                          placeholder=\"******\"\n                          autoCorrect={false}\n                          secureTextEntry={true}\n                          textContentType='newPassword'\n                          onChangeText={text => setVerifP(text)}\n\t\t\t\t\t\t              value = {verifP}\n                          onSubmitEditing={() => changeMdP(oldP, newP, verifP)}\n                        />\n                      </View>\n                      <Button\n                        onPress={() => {changeMdP(oldP, newP, verifP);}}\n                        title=\"Valider Mot de Passe\"\n                        color=\"#841584\"\n                        accessibilityLabel=\"Valider votre nouveau mot de passe\"\n                      />\n                    </View>\n\t\t\t\t\t          {/* <View style = {styles.item}>\n                      <Text style={styles.title}>Mes Activités</Text>\n\t\t\t\t\t          </View> */}\n\t\t\t\t\t\n\n                    {/*Header de la liste*/}\n                    <View style = {styles.header}>\n                      <Pressable style={{width:'33%'}} onPress={() => modeAffichage(dataEngagementDefaut, visibleData, setVisibleData, setAncienMode, ancienMode, \"jourdefaut\", header, setHeader)}>\n                        <Text style = {styles.headerTitle}>Jour {header.jourdefaut}</Text>\n                      </Pressable>\n                      <Pressable style={{width:'33%'}} onPress={() => modeAffichage(dataEngagementDefaut, visibleData, setVisibleData, setAncienMode, ancienMode, \"nomactivite\", header, setHeader)}>\n                        <Text style = {styles.headerTitle}>Activité {header.nomactivite}</Text>\n                      </Pressable>\n                      <Pressable style={{width:'33%'}} onPress={() => modeAffichage(dataEngagementDefaut, visibleData, setVisibleData, setAncienMode, ancienMode, \"nomsite\", header, setHeader)}>\n                        <Text style = {styles.headerTitle}>Site {header.nomsite}</Text>\n                      </Pressable>\n                    </View>\n\t\t\t\t\t\n                  </View>\n                </>\n              }\n              renderItem={renderItem}\n              keyExtractor={(item, index) => index.toString()}\n            />\n          </View>\n        </View>\n      )}\n    </SafeAreaView>\n  );\n\n\n\t// Fonction de changement de mot de passe\n\tfunction changeMdP (oldP, newP, verifP){\n\t  // Champs vide\n\t  if(oldP == \"\" || newP == \"\" || verifP == \"\"){\n    \n      Device.brand ? toastComponent(\"Au moins un des champs est vide\", \"warning\") : fctModalApp(\"Attention\", \"Au moins un des champs est vide\");\n\n\t  }\n\t  // vérif failled\n\t  else if(newP != verifP){\n      Device.brand ? toastComponent(\"Les champs correspondant au nouveau mot de passe ne sont pas identiques\", \"danger\") : fctModalApp(\"Attention\", \"Les champs du nouveau mot de passe ne concordent pas\");\n\t\t\n\t  }\n\t  // Condition (court)\n\t  else if(newP.length < 8){\n      Device.brand ? toastComponent(\"Votre mot de passe doit contenir au moins 8 caractères\", \"danger\") : fctModalApp(\"Mot de passe trop court\", \"Le mot de passe doit contenir au moins 8 caractères\");\n\n\t  }\n\t  // tout est bon\n\t  else {\n\t\tsetLoading(true);\n\t\tsendAPI('AUT', 'AP_UPD_MOTDEPASSE', {'ancienMDP':oldP, 'nouveauMDP':newP, 'idBenevole':userID})\n    .then((json) => {\n\t\t\tDevice.brand ? toastComponent(\"Votre mot de passe a bien été modifié.\", \"success\") : fctModalApp(\"succès\", \"Votre mot de passe a bien été modifié\");\n      setLoading(false);\n\t\t})\n\t\t.catch((error) => {setLoading(false); handleError (error)});\n\n\t  }\n\t  setOldP(\"\");\n\t  setNewP(\"\");\n\t  setVerifP(\"\");\n\n\t}\n\n\n\t// Fonction de changement d'information de contact\n\tfunction changeContact (phone, mail) {\n    phone = phone.replace(/[^\\d+]/g, '');\n\n    // Regex\n    var regexMail = /^(?:[a-zA-Z0-9!#$%&'*+/=?^_‘{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_‘{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/;\n    var regexPhone = /^(([0-9]{10})|(\\+33[0-9]{9}))$/;\n\n    // On vérifie les entrées\n    if( phone == \"\" ){\n      phone = dataPerso.telephone;\n    }\n    if( mail == \"\" ){\n      mail = dataPerso.email;\n    }\n    if( !regexMail.test(mail) ){\n      mail = dataPerso.email;\n      Device.brand ? toastComponent(\"Email non valide\", \"error\") : fctModalApp(\"Attention\", \"Email non valide\");\n    }\n    if( !regexPhone.test(phone) ){\n      phone = dataPerso.telephone;\n      Device.brand ? toastComponent(\"Numéro de téléphone non valide\", \"error\") : fctModalApp(\"Attention\", \"Numéro de téléphone non valide\");\n    }\n\n\n\t  if( (phone != dataPerso.telephone) || (mail != dataPerso.email) ){\n\n      sendAPI('APP', 'AP_UPD_INFO_BENEVOLE', {'P_TOKEN':token, 'P_EMAIL':mail, 'P_TELEPHONE':phone},token)\n      .then((texte) => {if (texte != \"1\") {throw \"Erreur lors de la mise à jour de la base de données\";} setPhone(\"\");setMail(\"\");setPersoUpToDate(false);setLoading(false)})\n      .catch((error) => {setPhone(\"\");setMail(\"\");setPersoUpToDate(false);setLoading(false); handleError (error)});\n\n      Device.brand ? toastComponent(\"Vos informations ont bien été mises à jour.\", \"success\") : fctModalApp(\"succès\", \"Vos informations ont bien été mise à jour\");\n    }\n\n    setPhone(\"\");\n    setMail(\"\");\n\n\t}\n\n}\n\n\n// On exporte la fonction principale\nexport default compteScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}